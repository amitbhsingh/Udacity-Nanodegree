"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){function r(o,i,n,a){return o&&Number(o)?function(){var e=this,t=arguments;clearTimeout(r),r=setTimeout(function(){a.apply(e,[i,n,t])},o)}:null;var r}RottenTomatoes.util={arrayUnique:function(o){return o.filter(function(e,t){return o.indexOf(e)>=t})},debounce:r,lazyLoad:function(e){var t,o={container:e&&e.container||"fd-lazyload-container",dataAttr:e&&e.dataAttr||"data-fd-lazyload-image",viewPortOffset:e&&e.viewPortOffset||20,debounce:e&&e.debounce||100,useViewport:!0},i=document.getElementById(o.container),n=[];function a(e,o){if(0===(n=e.querySelectorAll("["+o.dataAttr+"]")).length)return e.removeEventListener("scroll",t||a,!1),void window.removeEventListener("scroll",t||a,!1);Array.prototype.forEach.call(n,function(e){function t(){e.style.backgroundImage="url("+e.getAttribute(o.dataAttr)+")",e.removeAttribute(o.dataAttr)}o.useViewport?function(e,t){var o=e.getBoundingClientRect();return o.bottom<=document.documentElement.clientHeight+t&&o.right<=document.documentElement.clientWidth+t}(e,o.viewPortOffset)&&t():t()})}i&&(t=r(o.debounce,i,o,a),i.addEventListener("scroll",t||a,!1),window.addEventListener("scroll",t||a,!1),a(i,o))},capitalize:function(e){return"string"!=typeof e?"":e.length<=1?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},kFormatter:function(e){return 999<e?(Math.abs(e)/1e3).toFixed(1)+"k":e}}}(),RottenTomatoes.carousel={init:function(t,o){$(document).ready(function(){var e=$(t);e.slick&&(o.nextArrow||(o.nextArrow='<button class="CarouselButton CarouselButton__right"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="fill: currentcolor; vertical-align: middle; width: 24px; height: 24px;"><g><path d="M10 6l-1.41 1.41 4.58 4.59-4.58 4.59 1.41 1.41 6-6z"></path></g></svg></button>'),o.prevArrow||(o.prevArrow='<button class="CarouselButton CarouselButton__left"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="fill: currentcolor; vertical-align: middle; width: 24px; height: 24px;"><g><path d="M15.41 7.41l-1.41-1.41-6 6 6 6 1.41-1.41-4.58-4.59z"></path></g></svg></button>'),e.slick(o))})}},function(){var T=null;function c(){T.modal("hide"),$pdk.controller.resetPlayer(),T.find("#videoPlayer").html("")}RottenTomatoes.trailerModal={init:function(e){T=e,$(".closebutton").on("click",c),$(".closeBtn").on("click",c)},openNewModal:function(e,t,o,i,n){var a=RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.accountPid||"",r=RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.playerPid||"",s=RottenTomatoes.thirdParty&&RottenTomatoes.thirdParty.mpx.accountId||"";T.find("#videoPlayer").html('<iframe class="player" src="//player.theplatform.com/p/'+a+"/"+r+"/select/media/guid/"+s+"/"+e+"?autoPlay="+i+n+'&params=manifest%3Dm3u%26sst%3Dtrue%26debug%3Dtrue%26policy%3D9369485" onload="$pdk.bind(this, true); $pdk.controller.setIFrame(this, true);"allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" oallowfullscreen="" msallowfullscreen=""frameborder="0"></iframe>'),T.modal(),T.on("hidden.bs.modal",c),dataLayer.push({event:"ModalTrailer",title:o})}}}(),function(){var i=null,n=null,a=null;function t(){$("#newIframeTrailerModal").modal("hide")}function o(){$("#iframeVideoPlayer").attr("src","about:blank"),n.attr("content",a)}RottenTomatoes.iFrameTrailerModal={init:function(e){i=e,n=$('meta[name="viewport"]'),a=n.attr("content"),i.on("hidden.bs.modal",o),$(".closebutton").on("click",t)},openIframeModal:function(e,t,o){i.modal(),$("#iframeVideoPlayer").attr("src",e),n.attr("content",a+",minimum-scale=1,maximum-scale=1,user-scalable=no"),i.find(".modal-dialog").append('<div class="modal-link-text"><a target="_blank" class="modal-link-url" style="color:#FFFFFF" href="'+o+'"></a></div>'),i.find(".modal-link-url").text(t)}}}(),function(){var n="RottenTomatoes.showtimes";RottenTomatoes.showtimes={getShowtimeCalendar:function(o,i){return new Promise(function(t,e){if(!(o&&i&&o.fandangoId&&o.titleId))return e(new Error(n+".getShowtimeCalendar: missing movieInfo"));$.ajax({url:RottenTomatoes.link.napiMovieCalendar({id:o.fandangoId,title:o.titleId}),data:i,timeout:11e3,xhrFields:{withCredentials:!0}}).done(function(e){t(Object.assign({fandangoData:o,geoLocation:i},e))}).fail(e)})},getShowtimes:function(o){return new Promise(function(t,e){if(!o)return e(new Error(n+".getShowtimes: missing movieInfo"));$.ajax({url:RottenTomatoes.link.napiMovieShowtimeGroupings({id:o.fandangoData&&o.fandangoData.fandangoId,startDate:o.selectedDate||new Date}),data:o.geoLocation,timeout:11e3,xhrFields:{withCredentials:!0}}).done(function(e){t(Object.assign({},o,e))}).fail(e)})}}}(),function(){var t={ZIP:"zip",LAT:"lat",LONG:"long",LOCATION_NAME:"location_name",AKAMAI_LOCATION:"akamai_generated_location"},i={FIVE_DIGIT:/^\d{5}$/,ZIP_RANGE:/^\d{5}-\d{5}$/,FOUR_QUOTES:/("""")/g},o={CANADA:"CA",EU_ARRAY:["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PO","PT","RO","SE","SI","SK"]};function n(e,t){var o,i=[],n=0;if("string"!=typeof e&&"number"!=typeof e)return null;if(t-(o=(e=e.toString()).length)<1)return e;for(;n<t-o;n++)i.push("0");return i.concat([e]).join("")}function e(e){var t,o={};if(!e||"string"!=typeof e||e.indexOf(":")<0)return"";e=e.replace(i.FOUR_QUOTES,'""');try{o=JSON.parse(e)}catch(e){return""}return{zipRanges:t=function(e){return e&&"string"==typeof e?e.split("+").map(function(e){var t,o=[];if(!e)return null;if(i.FIVE_DIGIT.test(e))return[e];if(!i.ZIP_RANGE.test(e))return null;for((t=e.split("-"))[0];t[0]<=t[1];t[0]++)o.push(n(t[0],5));return o}):null}(o.zip),zip:t&&t[0]&&t[0][0]||"",city:o.city||"",state:o.state||"",areacode:o.areacode||"",lat:o.lat||"",long:o.long||"",countryCode:o.countrycode||""}}function a(){return e(RottenTomatoes.cookie.getCookie(t.AKAMAI_LOCATION))}function r(){var e=a();return e&&e.countryCode||""}RottenTomatoes.locationUtils={CountryCodes:o,getAkamaiEdgescape:a,getCountryCode:r,getLocation:function(){var e;return RottenTomatoes.cookie.getCookie(t.ZIP)?e={zip:RottenTomatoes.cookie.getCookie(t.ZIP),displayName:RottenTomatoes.cookie.getCookie(t.ZIP)}:RottenTomatoes.cookie.getCookie(t.LAT)&&RottenTomatoes.cookie.getCookie(t.LONG)?e={lat:RottenTomatoes.cookie.getCookie(t.LAT),long:RottenTomatoes.cookie.getCookie(t.LONG),displayName:RottenTomatoes.cookie.getCookie(t.LOCATION_NAME)||"Unavailable"}:(RottenTomatoes.context.akamaiEdgescape=a(),RottenTomatoes.context.akamaiEdgescape&&(e={zip:RottenTomatoes.context.akamaiEdgescape.zip,displayName:RottenTomatoes.context.akamaiEdgescape.zip})),e},getLocationFromText:function(e,t){var o={type:"GET",timeout:11e3,url:RottenTomatoes.link.napiGetLocationFromText({},{text:e})};RottenTomatoes.xhr.ajax(o).done(t).fail(function(){})},getLocationAutocompleteSource:function(){return function(e,o){var t=RottenTomatoes.link.napiAutocomplete({text:e.term});$.ajax({url:t,timeout:11e3,xhrFields:{withCredentials:!0},success:function(e){var t=e.predictions.map(function(e){return{placeId:e.id,label:e.description}});o(t)},error:function(e){}})}},isCanadianCountryCode:function(e){return(e||r())===o.CANADA},isEuropeanCountryCode:function(e){var t=e||r();return o.EU_ARRAY.includes(t)},saveLocationCookie:function(e){e&&(RottenTomatoes.cookie.deleteCookie(t.ZIP),RottenTomatoes.cookie.deleteCookie(t.LOCATION_NAME),RottenTomatoes.cookie.deleteCookie(t.LAT),RottenTomatoes.cookie.deleteCookie(t.LONG),e.displayName&&i.FIVE_DIGIT.test(e.displayName)&&RottenTomatoes.cookie.setCookie(t.ZIP,e.displayName,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY),e.lat&&e.long&&(RottenTomatoes.cookie.setCookie(t.LAT,e.lat,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY),RottenTomatoes.cookie.setCookie(t.LONG,e.long,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY)),RottenTomatoes.cookie.setCookie(t.LOCATION_NAME,e.displayName,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY))}}}(),function(){var t={LOCATION_PICKER:{NEW_LOCATION:"location:new-location"}},o={SHOWTIMES_RESULTS:".js-location-results",TYPEAHEAD_INPUT:".js-movie-showtimes-location__input"},i=13;function n(e){e&&RottenTomatoes.locationUtils.getLocationFromText(e,function(e){RottenTomatoes.eventQ.emit(t.LOCATION_PICKER.NEW_LOCATION,e)})}function a(e,t){n(t&&t.item&&t.item.label)}RottenTomatoes.locationPicker={init:function(e,t){!function(t,e){t.autocomplete(Object.assign({appendTo:o.SHOWTIMES_RESULTS,autofocus:!0,source:RottenTomatoes.locationUtils.getLocationAutocompleteSource(),minLength:2,select:a},e)),t.keydown(function(e){e.keyCode===i&&n(t[0].value)})}(e,t)},EVENT_NAMES:t}}(),function(){var r=1e4,t={CREATE_WTS:"createWTS",DELETE_WTS:"deleteWTS",CREATE_RATING:"createRating",GET_WTS:"getWTS",GET_RATING:"getRating"},o={POST:"POST",GET:"GET"},s={INVALID_DATA:"Invalid data",INVALID_MEDIA_TYPE:"Invalid mediaType",INVALID_API_NAME:"Invalid api name"};function i(e,i){if("object"===!_typeof(i)||null===i)return Promise.reject(new Error(s.INVALID_DATA));if("movie"!==i.mediaType&&"tv"!==i.mediaType)return Promise.reject(new Error(s.INVALID_MEDIA_TYPE));var n,a;switch(e){case t.CREATE_WTS:a=RottenTomatoes.link.napiUserWTSCreate(),n=o.POST;break;case t.DELETE_WTS:a=RottenTomatoes.link.napiUserWTSDelete(),n=o.POST;break;case t.CREATE_RATING:a=RottenTomatoes.link.napiUserRatingCreate(),n=o.POST;break;case t.GET_WTS:a=RottenTomatoes.link.napiUserGetWTS(),n=o.GET;break;case t.GET_RATING:a=RottenTomatoes.link.napiUserGetRating(),n=o.GET;break;default:return Promise.reject(new Error(s.INVALID_API_NAME))}return new Promise(function(t,o){RottenTomatoes.xhr.ajax({type:n,url:a,timeout:r,dataType:"json",data:i}).done(function(e){t(e)}).fail(function(e){o(e)})})}RottenTomatoes.rating={createWTS:function(e){return i(t.CREATE_WTS,e)},deleteWTS:function(e){return i(t.DELETE_WTS,e)},getWTS:function(e){return i(t.GET_WTS,e)},getRating:function(e){return i(t.GET_RATING,e)},getUserRating:function(e,t){var o,i={};return"movie"!==t&&"tv"!==t||(i[t+"Id"]=e,o="movie"===t?RottenTomatoes.link.napiUserMovieRating:RottenTomatoes.link.napiUserTvRating),new Promise(function(t,e){$.ajax({type:"GET",url:o(i),timeout:r,dataType:"json"}).done(function(e){t(e)}).fail(e)})},updateRating:function(e){return i(t.CREATE_RATING,e)},updateUserRating:function(e,o,t){var i,n={};return"movie"!==t&&"tv"!==t||(n[t+"Id"]=e,i="movie"===t?RottenTomatoes.link.napiUserUpdateMovieRating:RottenTomatoes.link.napiUserUpdateTvRating),new Promise(function(t,e){RottenTomatoes.xhr.ajax({method:"POST",url:i(n),timeout:r,data:o,dataType:"json"}).done(function(e){t(e)}).fail(e)})},EVENT_NAMES:{RATING:{FAIL_RATING_POST:"User rating post failed",RATING_POSTED:"User rating was posted",RATING_MODAL_CLOSED:"User closed the rating modal",REVIEW_SUBMISSION_STARTED:"Review submission started"}}}}(),function(){var e,i={AMENITY_ALERT:".js-tshow-grp__amenity-name a",CHANGE_LOCATION:".changeLocation",FULL_TITLE:"#fullTitle",GO_BACK:".goBack",MOVIE_TITLE:"h1.title",SHOWTIMES_LOCATION:".showtimes-location",SHOWTIMES_PRESENTATIONS:".showtimes-presentations",SHOWTIMES_CONTAINER:".js-showtimes-container",SHOWTIMES_LOCATION_INPUT:".js-movie-showtimes-location__input",SHOWTIMES_PRESENTATION_CONTAINER:".js-showtimes-presentations-container",SHOWTIMES_NO_SHOWTIMES_MESSAGE:".js-movie-showtimes-location__no-showtime-message"},t={AMENITY_DESCRIPTION:"js-tshow-grp__amenity-description",CSS_HIDDEN:"hide"};function n(e){e.preventDefault(),-1<e.target.className.indexOf(t.AMENITY_DESCRIPTION)?alert(this.getAttribute("data-amenity-desc")):alert("Tickets coming soon. Be sure to check back later!")}function a(){$(i.SHOWTIMES_LOCATION).removeClass(t.CSS_HIDDEN),$(i.SHOWTIMES_PRESENTATIONS).addClass(t.CSS_HIDDEN)}function r(){$(i.SHOWTIMES_LOCATION_INPUT).val(""),$(i.SHOWTIMES_LOCATION).addClass(t.CSS_HIDDEN),$(i.SHOWTIMES_PRESENTATIONS).removeClass(t.CSS_HIDDEN)}function s(e){var t,o=$(i.SHOWTIMES_PRESENTATION_CONTAINER);o.length&&((t=$(nunjucks.render("_movieShowtimes",e))).find(i.AMENITY_ALERT).on("click touchstart",n),t.find(i.CHANGE_LOCATION).on("click touchstart",a),o.html(t),r(),$(i.SHOWTIMES_NO_SHOWTIMES_MESSAGE).addClass("hide"),$(i.GO_BACK).removeClass("hide"))}function T(){$(i.SHOWTIMES_NO_SHOWTIMES_MESSAGE).removeClass("hide"),$(i.GO_BACK).addClass("hide")}function o(e,t){var o=e||RottenTomatoes.context.fandangoData;o&&t&&($(i.SHOWTIMES_LOCATION_INPUT).val(t.displayName),RottenTomatoes.showtimes.getShowtimeCalendar(o,t).then(RottenTomatoes.showtimes.getShowtimes).then(s).then(function(){RottenTomatoes.locationUtils.saveLocationCookie(t)}).catch(T))}(e=$(i.SHOWTIMES_LOCATION_INPUT)).length&&RottenTomatoes.locationPicker.init(e),$(i.GO_BACK).on("click touchstart",r),RottenTomatoes.eventQ.register(RottenTomatoes.locationPicker.EVENT_NAMES.LOCATION_PICKER.NEW_LOCATION,function(e){$(i.SHOWTIMES_LOCATION_INPUT).val(e.displayName),o(null,e)}),RottenTomatoes.movie={renderShowtimes:o}}(),function(){var n=1e4,i={MOVIEEXTRA:"MOVIEEXTRA",MOVIE:"MOVIE",ADMIN:"ADMIN",EDITORIAL:"EDITORIAL",TOMATAZOS:"TOMATAZOS"};function a(o,i){return new Promise(function(t,e){if(!o)return e(new TypeError("Missing Data"));$.ajax({type:"GET",url:o,timeout:n,dataType:"json"}).done(function(e){t(Object.assign(i,e))}).fail(e)})}RottenTomatoes.admin={canDisplayAdminMenu:function(e){var t=!1,o=0;if(!e||!e.length)return t;for(;o<e.length;o++)if(i[e[o]]){t=!0;break}return t},canDisplayCriticAddArticle:function(e){return e.some(function(e){return"RTCRITIC"===e})},getMovieDetailMenu:function(e){var t={id:e};return a(RottenTomatoes.link.napiAdminMovieDetailMenu(t),t)},getTvEpisodeDetailMenu:function(e,t,o){var i={episodeId:e,seasonId:t,seriesId:o};return a(RottenTomatoes.link.napiAdminTvEpisodeDetailMenu(i),i)},getTvSeasonDetailMenu:function(e,t){var o={seasonId:e,seriesId:t};return a(RottenTomatoes.link.napiAdminTvSeasonDetailMenu(o),o)},getTvSeriesDetailMenu:function(e){var t={seriesId:e};return a(RottenTomatoes.link.napiAdminTvSeriesDetailMenu(t),t)},getFranchiseDetailMenu:function(e){var t={franchiseId:e};return a(RottenTomatoes.link.napiAdminFranchiseDetailMenu(t),t)}}}(),function(){var i=$("#movies_sidebar"),n=-1*$("#main_movie_sidebar_content").height()+40,a=$("#movies_sidebar>.panel-rt").offset().top-61;function e(){var e=$(window).scrollTop();$("#movieListColumn").css("height",$("#mainColumn").height());var t=$("#mainColumn").height()+a-$("#movies_sidebar").height(),o=0;0<$("#super").height()&&(o=$("#super").height()),e<=a+o?i.removeAttr("style"):t+o<e?i.css({position:"absolute",bottom:"0",top:"auto"}):i.css({position:"fixed",top:n})}$(window).scroll(function(){e()}),e()}(),function(){var e,t,o,i=".Carousel.VideosCarousel",n=".VideosCarousel__item a",a="#videos-carousel-root",r=2,s=2,T=4,c=4,l=2.5,R=2,d=$(a)&&$(a).width()<300||!1;e=RottenTomatoes.context.videoClipsJson&&3<RottenTomatoes.context.videoClipsJson.count||!1,t=RottenTomatoes.context.videoClipsJson&&4<RottenTomatoes.context.videoClipsJson.count||!1,o={dots:!0,infinite:e,speed:250,slidesToShow:d?r:T,slidesToScroll:d?s:c,arrows:t,draggable:!0,lazyLoad:"ondemand",responsive:[{breakpoint:768,settings:{slidesToShow:l,slidesToScroll:R,dots:!1,arrows:!1,infinite:!1}}]},RottenTomatoes.carousel.init(i,o),$(n).each(function(e,t){$(t).on("click",function(){!function(e){window.ga&&window.ga("gtmTracker.send","pageview",window.location.pathname+"/modal/videos/"+e)}($(this).attr("data-video-id"))})})}(),function(){var s={CAROUSEL_ROOT:"#photos-carousel-root",PHOTOSWIPE:".pswp",IMAGE_PREFIX:"#photo-gallery-item-"},i=2,n=4,T=2,c=2,l=4,R=4,d=2.5,E=2,_=[];function u(e){var t=document.querySelector(s.PHOTOSWIPE),o=new PhotoSwipe(t,PhotoSwipeUI_Default,_,{index:e,preload:[i,n],indexIndicatorSep:" of ",shareEl:!1,fullscreenEl:!1,closeOnScroll:!1});o.init(),o.listen("afterChange",function(){!function(e){window.dataLayer&&window.dataLayer.push({event:"MOBPhotoViewModal"}),window.ga&&window.ga("gtmTracker.send","pageview",window.location.pathname+"/modal/pictures/"+e)}(o.currItem.pid)})}!function(e){if(_=e&&e.map(function(e){return{pid:e.id,src:e.urls.fullscreen,w:e.width,h:e.height,title:e.caption}}),""!==window.location.hash){var t=RottenTomatoes.queryTool.getQueriesFromUrl().pid,o=$(s.IMAGE_PREFIX+t);$(document).ready(function(){o.trigger("click")})}}(RottenTomatoes.context.imagesJson),RottenTomatoes.photoComponent={init:function(e,t,o){var i=$(s.CAROUSEL_ROOT)&&$(s.CAROUSEL_ROOT).width()<300||!1,n=3<_.length,a=4<_.length,r={dots:!0,infinite:n,speed:250,slidesToShow:i?T:l,slidesToScroll:i?c:R,arrows:a,draggable:!0,lazyLoad:"ondemand",responsive:[{breakpoint:768,settings:{slidesToShow:d,slidesToScroll:E,dots:!1,arrows:!1,infinite:!1}}]};o&&RottenTomatoes.carousel.init(e,r),$(t).each(function(e,t){$(t).on("click",function(){u(e)})})}}}(),function(t){var e,o={CLOSE_MODAL:"#verified-modal-close",LEARN_MORE_LINK:".verified-tab__tooltip--link",MOBILE_BOTTOM_NAV:"#nav-list",MOBILE_OVERLAY:".js-verified-modal-overlay",CONTAINER:"#main_container",POPOVER_LABEL:".js-verified-popover",REVIEW_TEXT:".js-review-text",VERIFIED_MODAL_MOBILE:".js-verified-modal--mobile",VERIFIED_TEXT:".js-verified-review",POPOVER_CONTAINER:".popover",POPOVER_CONTAINER_HOVER:".popover:hover"};function i(){RottenTomatoes.tracking.satelliteTrack("verified rollover")}function n(){RottenTomatoes.tracking.satelliteTrack("verified rollover learn more clicks")}function a(){t(o.LEARN_MORE_LINK).off("click",n),t(o.VERIFIED_MODAL_MOBILE).removeClass("open"),t(o.MOBILE_OVERLAY).addClass("hide")}function r(e){e.preventDefault(),window.matchMedia("only screen and (max-width: 760px)").matches&&(t(o.VERIFIED_MODAL_MOBILE).addClass("open"),t(o.MOBILE_OVERLAY).removeClass("hide"),t(o.LEARN_MORE_LINK).on("click",n),i())}function s(){var e=this;t(this).popover("show"),t(o.POPOVER_CONTAINER).on("mouseleave",function(){t(e).popover("hide")}),i(),t(o.LEARN_MORE_LINK).on("click",n)}function T(){var e=this;setTimeout(function(){t(o.POPOVER_CONTAINER_HOVER).length||t(e).popover("hide")},300)}function c(){t(o.VERIFIED_TEXT).on("click",r),t(o.CLOSE_MODAL).on("click",a),t(o.POPOVER_LABEL).popover({trigger:"manual",html:!0,animation:!1,content:function(){var e=RottenTomatoes.context.verifiedTooltip;return e&&e.verifiedTooltipTop?nunjucks.render("_verifiedPopover",{topText:e.verifiedTooltipTop,topLinkURL:e.verifiedTooltipTopLinkURL,topLinkText:e.verifiedTooltipTopLinkText,topLinkVisible:e.verifiedTooltipTopLinkVisible,bottomText:e.verifiedTooltipBottom,bottomLinkURL:e.verifiedTooltipBottomLinkURL,bottomLinkText:e.verifiedTooltipBottomLinkText,bottomLinkVisible:e.verifiedTooltipBottomLinkVisible,bottomVisible:e.verifiedTooltipBottomVisible}):""}()}).on("mouseenter",s).on("mouseleave",T)}(e=RottenTomatoes.context.verifiedTooltip)&&e.verifiedTooltipTop&&t(o.CONTAINER).after(nunjucks.render("_verified-modal",{topText:e.verifiedTooltipTop,topLinkURL:e.verifiedTooltipTopLinkURL,topLinkText:e.verifiedTooltipTopLinkText,topLinkVisible:e.verifiedTooltipTopLinkVisible,bottomText:e.verifiedTooltipBottom,bottomLinkURL:e.verifiedTooltipBottomLinkURL,bottomLinkText:e.verifiedTooltipBottomLinkText,bottomLinkVisible:e.verifiedTooltipBottomLinkVisible,bottomVisible:e.verifiedTooltipBottomVisible})),c(),RottenTomatoes.popover={reinitialize:c}}(jQuery),RottenTomatoes.pages=Object.assign(RottenTomatoes.pages||{},{movieDetails:{}}),function(a){var r,e,s,T,n,c,l,t,o,i,R,d,E,_,u={SHOW_BTN:"#scoreModal_showScoreboardBtn",HIDE_BTN:"#scoreModal_hideScoreboardBtn",SHOW_BTN_NEW_BADGE:"#scoreModal_showScoreboardBtn_newBadge",PARENT_ELEMENT:".js-mop-ratings",RATINGS_WRAP:".js-mop-ratings-wrap",RATINGS_POPOVER:{AVERAGE_RATING:"#js-average-rating",FRESH_COUNT:"#js-fresh-count",REVIEW_COUNT:"#js-review-count",ROTTEN_COUNT:"#js-rotten-count",TOMATOMETER_POPOVER_ICON:"#js-popover-tomatometer-icon",TOMATOMETER_POPOVER_SCORE:"#js-popover-tomatometer-score",TOMATOMETER_PROGRESS:"#js-tomatometer-progress"},TOMATOMETER_OVERLAY:"#js-tomatometer-overlay",PROGRESS_BAR_AUDIENCE:"#scoreModal_progressBar_audience",PROGRESS_BAR_CRITICS:"#scoreModal_progressBar_critics",AUDIENCE_TYPE_TOGGLE_BTNS:".js-audience-toggle-btn",CRITICS_TYPE_TOGGLE_BTNS:".js-critics-toggle-btn"},I={EXTENDED_RATINGS:"mop-ratings-wrap--extended",HIDE_SHOWTIMES_OVERLAY:"hide-tm-overlay",CLOSE_BTN_VISIBLE:"mop-ratings-wrap__show-more-btn--close-visible"};function m(e,t){"number"!=typeof(t="string"==typeof t?parseInt(t):t)&&(t=0),a(e).css({width:t+"%"})}function A(e){return"POSITIVE"===e?"upright":"spilled"}function S(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}function v(e){var t,o,i=e.currentTarget.dataset.type,n="verified"===i?T:s;switch(i){case"verified":t="audience | verified audience",o=l.verifiedAudienceScoreMsg;break;case"all":t="audience | all audience",o=l.allAudienceScoreMsg}RottenTomatoes.tracking.satelliteTrack(t),r.audience=Object.assign({},n,{activeBtn:i,audienceClass:A(n.scoreSentiment),description:o}),f(),m(u.PROGRESS_BAR_AUDIENCE,n.score),a(u.AUDIENCE_TYPE_TOGGLE_BTNS).filter('[data-type="'+i+'"]').focus()}function C(e){var t,o=e.currentTarget.dataset.type,i="all"===o?n:c;switch(o){case"top":t="tomatometer | top critics";break;case"all":t="tomatometer | all critics"}RottenTomatoes.tracking.satelliteTrack(t),r.critics=Object.assign({},i,{activeBtn:o,description:l.tomatometerMsg}),f(),m(u.PROGRESS_BAR_CRITICS,i.score),a(u.CRITICS_TYPE_TOGGLE_BTNS).filter('[data-type="'+o+'"]').focus()}function f(){e||(e=a(u.PARENT_ELEMENT).append("<div/>")),e.html(nunjucks.render("_scoreboardModal",r)),a(u.AUDIENCE_TYPE_TOGGLE_BTNS).click(v),a(u.CRITICS_TYPE_TOGGLE_BTNS).click(C),r.initialCriticProgress=r.critics.score||0,r.initialAudienceProgress=r.audience.score||0}function O(e){a(u.TOMATOMETER_OVERLAY).toggleClass(I.HIDE_SHOWTIMES_OVERLAY),function(e){e||(e="all");var t=RottenTomatoes.context.scoreInfo;if(t&&t.tomatometerAllCritics&&t.tomatometerTopCritics){var o="all"===e?t.tomatometerAllCritics:t.tomatometerTopCritics,i=o.score+"%";a(u.RATINGS_POPOVER.TOMATOMETER_PROGRESS).css({width:i}).removeClass("rotten fresh certified_fresh").addClass(o.tomatometerState),a(u.RATINGS_POPOVER.TOMATOMETER_POPOVER_ICON).removeClass("rotten fresh certified_fresh").addClass(o.tomatometerState),o.score&&(a(u.RATINGS_POPOVER.TOMATOMETER_POPOVER_SCORE).text(o.score?i:"N/A"),a(u.RATINGS_POPOVER.AVERAGE_RATING).text(o.avgScore+"/10"),a(u.RATINGS_POPOVER.REVIEW_COUNT).text(o.numberOfReviews),a(u.RATINGS_POPOVER.FRESH_COUNT).text(o.freshCount),a(u.RATINGS_POPOVER.ROTTEN_COUNT).text(o.rottenCount)),function(){var e=a(u.RATINGS_WRAP),t=e.data().hasTrailer,o=!a(u.TOMATOMETER_OVERLAY).hasClass(I.HIDE_SHOWTIMES_OVERLAY);a.when(o).then(function(){t||e.toggleClass(I.EXTENDED_RATINGS)})}()}}(),a(e&&e.currentTarget||u.SHOW_SCOREBOARD_BTN).toggleClass(I.CLOSE_BTN_VISIBLE),RottenTomatoes.tracking.satelliteTrack("tomatometer more info clicks")}function N(){f(),m(u.PROGRESS_BAR_AUDIENCE,r.initialAudienceProgress),m(u.PROGRESS_BAR_CRITICS,r.initialCriticProgress),function(){var e=a(u.CRITICS_TYPE_TOGGLE_BTNS);e.length?e[0].focus():(e=a(u.AUDIENCE_TYPE_TOGGLE_BTNS)).length&&e[0].focus()}()}i=RottenTomatoes.context.scoreBoardViewModel,R=RottenTomatoes.context.scoreInfo.tomatometerAllCritics,d=RottenTomatoes.context.scoreInfo.audienceAll,E=Boolean(R&&R.numberOfReviews&&0<=RottenTomatoes.sanitizer.integer(R.score,-1)),_=Boolean(d&&d.reviewCount&&0<=RottenTomatoes.sanitizer.integer(d.score,-1)),E||_?(a(u.HIDE_BTN).addClass("hide"),t=i,o=!!Object.keys(t).length,s=RottenTomatoes.context.scoreInfo.audienceAll||{},T=RottenTomatoes.context.scoreInfo.audienceVerified||{},n=RottenTomatoes.context.scoreInfo.tomatometerAllCritics||{},c=RottenTomatoes.context.scoreInfo.tomatometerTopCritics||{},l=RottenTomatoes.context.scoreDetailDescription||{},(r={hasMovieData:o,iconSizeCSSClass:S()?"tiny":"small",isReleased:RottenTomatoes.context.movieDetails.isReleased,releaseDate:RottenTomatoes.context.movieDetails.releaseDate,showtimesLink:RottenTomatoes.link.webShowtimes(),verified:t.isVerified,isPrerelease:t.isPrerelease,canVerifyRatings:t.canVerifyRatings,initialCriticProgress:0,initialAudienceProgress:0,counts:{allCritics:n.numberOfReviews||0,topCritics:c.numberOfReviews||0,allAudience:0,verifiedAudience:0},showMobileRatings:S(),critics:{},audience:{},scoreDetailDescription:l}).canVerifyRatings?r.audience=Object.assign({},T,{activeBtn:"verified",audienceClass:A(T.scoreSentiment),description:l.verifiedAudienceScoreMsg}):r.audience=Object.assign({},s,{activeBtn:"all",audienceClass:A(s.scoreSentiment),description:l.allAudienceScoreMsg}),r.critics=Object.assign({},n,{activeBtn:"all",description:l.tomatometerMsg}),a(u.SHOW_BTN).click(N),i.showNewIcon&&a(u.SHOW_BTN_NEW_BADGE).removeClass("hide"),a(u.SHOW_BTN).on("click",O),a(u.HIDE_BTN).on("click",O)):a(u.SHOW_BTN).addClass("hide")}(jQuery),function(o){var i={ADMIN_PANEL:".js-admin-panel",ADMIN_PANEL_CONTENT:".js-admin-panel__content"},n={MOVIEEXTRA:"MOVIEEXTRA",MOVIE:"MOVIE",ADMIN:"ADMIN",EDITORIAL:"EDITORIAL",TOMATAZOS:"TOMATAZOS"},t=!1;function a(e){if(e.preventDefault(),t)return o(i.ADMIN_PANEL_CONTENT).toggleClass("hide");RottenTomatoes.admin.getMovieDetailMenu(RottenTomatoes.context.movieDetails.id).then(function(e){e&&e.markup&&(o(i.ADMIN_PANEL).append(e.markup),t=!0)}).catch(function(e){})}function e(e){if(function(e){if(!e||!e.length)return!1;for(var t=!1,o=0;o<e.length;o++)if(n[e[o]]){t=!0;break}return t}(e.roles)&&RottenTomatoes.context.movieDetails.id){var t=o("<a>").addClass("fr js-admin-panel__button").attr("href","#").css("padding","5px 5px 0 0").text(RottenTomatoes.context.movieDetails.id+" - Admin Menu").click(a);o(i.ADMIN_PANEL).append(t)}}function r(){t=!1,o(i.ADMIN_PANEL).html("")}RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,e),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,r)}(jQuery),function(i){var n,a={CAROUSEL:".Carousel.PhotosCarousel",CAROUSEL_ITEM_LINK:".PhotosCarousel__item a",HERO_IMAGE_PLAY_BUTTON:"#heroImageContainer .playButton",PHOTOS_CAROUSEL_IMAGE:".PhotosCarousel__image",PHOTOS_CAROUSEL_PRELOAD:".PhotosCarousel .preload",RATE_IT_BUTTON:".js-rate-it-button",RATING_ROOT:"#rating-root"};function e(){i("html, body").animate({scrollTop:i(a.RATING_ROOT).offset().top-i(window).height()/2},1e3)}RottenTomatoes.photoComponent.init(a.CAROUSEL,a.CAROUSEL_ITEM_LINK,!0),RottenTomatoes.queryTool.getQuery("pid")&&(n=RottenTomatoes.queryTool.getQuery("pid"),i(a.PHOTOS_CAROUSEL_PRELOAD).each(function(e,t){if(t.id===n){var o=i(this).find(a.PHOTOS_CAROUSEL_IMAGE);RottenTomatoes.lazyLoad.revealImage(o),o.click()}})),i(a.HERO_IMAGE_PLAY_BUTTON).addClass("in"),i(a.RATE_IT_BUTTON).click(e),RottenTomatoes.context.fandangoData&&RottenTomatoes.movie.renderShowtimes(RottenTomatoes.context.fandangoData,RottenTomatoes.locationUtils.getLocation()),i(document).ready(function(){RottenTomatoes.clamp.init({buttonText:"Show More",buttonClass:"clamp-toggle__show-more--bold"})})}(jQuery),function(){var i=!1,n=null,o=!1,a=null;function e(e){e.preventDefault();var t=$(e.currentTarget);o?RottenTomatoes.iFrameTrailerModal.openIframeModal(t.attr("data-trailer-url"),t.data("sponsoredText"),t.data("sponsoredUrl")):a=function(){RottenTomatoes.iFrameTrailerModal.openIframeModal(t.attr("data-trailer-url"),t.data("sponsoredText"),t.data("sponsoredUrl"))}}function t(e){e.preventDefault();var t=$(e.currentTarget),o="";t.data("mpx-fwsite")&&(o="&fwsitesection="+t.data("mpx-fwsite")),i?RottenTomatoes.trailerModal.openNewModal(t.data("video-id"),t.data("thumbnail"),t.data("title"),!0,o):n=function(){RottenTomatoes.trailerModal.openNewModal(t.data("video-id"),t.data("thumbnail"),t.data("title"),!0,o)}}RottenTomatoes.trailerModal.init($("#newTrailerModal")),i=!0,n&&(n(),n=null),RottenTomatoes.iFrameTrailerModal.init($("#newIframeTrailerModal")),o=!0,a&&(a(),a=null),$(".trailer_play_action_button").on("click",t),$(".featured_video_play_action_button").on("click",e)}(),function(){var e={CAST_REMAINING:".castRemaining",MORE_CAST_AND_CREW:".moreCasts",CAST_REMAINING_IMG:".castRemaining img",CAST_AND_CREW_REMAINING_IMG:".moreCasts img",SHOW_MORE_CAST:"#showMoreCast",SHOW_MORE_CAST_AND_CREW:"#showMoreCastAndCrew"},t=!1;function o(){$(e.CAST_REMAINING_IMG).each(function(e,t){RottenTomatoes.lazyLoad.revealImage(t)}),$(e.CAST_REMAINING).removeClass("castRemaining"),$(e.SHOW_MORE_CAST).hide()}function i(){$(e.CAST_AND_CREW_REMAINING_IMG).each(function(e,t){RottenTomatoes.lazyLoad.revealImage(t)}),(t=!t)?($(e.MORE_CAST_AND_CREW).removeClass("hide"),$(e.SHOW_MORE_CAST_AND_CREW).html("Hide Cast & Crew")):($(e.MORE_CAST_AND_CREW).addClass("hide"),$(e.SHOW_MORE_CAST_AND_CREW).html('Show all Cast & Crew <span class="caret"></span>'))}$(e.SHOW_MORE_CAST).click(o),$(e.SHOW_MORE_CAST_AND_CREW).click(i)}(),function(){var o,i={TOOLTIP:{OPEN:"rt tooltip open",CLOSE:"rt tooltip close"}},n={RT_TOOLTIP:".js-rt-tooltip",RT_TOOLTIP_CLOSE_BTN:".js-tooltip-close-btn"},a={TOMATOMETER:"tomatometer",AUDIENCE_SCORE:"audience-score"},e=150,r=window.matchMedia("only screen and (max-width: 760px)").matches;function t(e){if((!0!==e.data("desktop-only")||!r)&&(o=!0,0===$(n.RT_TOOLTIP).length)){var t;switch(e.data("help-content")){case a.AUDIENCE_SCORE:t=nunjucks.render("_audienceScore",{scoreDetailDescription:RottenTomatoes.context.scoreDetailDescription,canVerifyRatings:RottenTomatoes.scoreDetailModel.getViewModel.canVerifyRatings,hasAudienceScore:!!RottenTomatoes.scoreDetailModel.getViewModel.audienceScoreAll.avgScore,mediaType:RottenTomatoes.scoreDetailModel.getViewModel.mediaType});break;case a.TOMATOMETER:t=nunjucks.render("_tomatometer",{scoreDetailDescription:RottenTomatoes.context.scoreDetailDescription})}e.append(t).focus().on("focusout",function(){s()}),$(n.RT_TOOLTIP_CLOSE_BTN).on("click",function(){s()}),e.data("placement")&&$(n.RT_TOOLTIP).css(e.data("placement"),"0"),$(n.RT_TOOLTIP).on("click touch",function(){RottenTomatoes.eventQ.emit(o?i.TOOLTIP.OPEN:i.TOOLTIP.CLOSE,o)})}}function s(){setTimeout(function(){$(n.RT_TOOLTIP).remove(),o=!1},e)}RottenTomatoes.tooltip={EVENT_NAMES:i,initToolTip:function(e){o=!1,e.off().on("click touch",function(){o||t(e)})}}}(),function(){var n,a={ADD_ARTICLE_BUTTON:".js-critics-add-article",CRITIC_FILTER_LINK:".js-critics-filter-link",DROPDOWN_TRIGGER:".js-rt-dropdown-trigger",LOGIN_MODAL:"#login",MSG_VERIFY_USER:".js-msg-verify-user",MSG_CONTACT_US:".js-msg-contact-us",POST_REVIEW_FEEDBACK:".js-rating_textbox-submit-status",RESEND_EMAIL_BTN:".js-resend-email-btn",RATING_MODAL:"#rating_widget_modal",RATING_MODAL_BTN:".js-rating_modal-btn",RATING_MODAL_CLOSE_BTN:".js-rating__modal-closeBtn",RATING_MODAL_FOOTER:".rating-modal-footer",RATING_MODAL_OPEN_BTN:".js-user-rating-mobile__review-modal-button",RATING_MODAL_TITLE:".login-modal-title",RATING_MODAL_STAR_MEANINGS:".js-rating__widget-modal--star-meanings",RATING_STARS:".js-rating-stars",RATING_STARS_MOBILE_WRAP:".js-user-rating-mobile__stars-wrap",RATING_STAR:".js-rating-star",RATING_WIDGET:".rating_widget_mobile-star",RATING_WIDGET_REVIEW_DESCRIPTION:".js-user-rating-mobile__add-review-text",RATINGS_WRAP:".js-mop-ratings-wrap",REVIEW_TEXT_AREA:".js-rating_textbox-textarea",SUBMIT_BUTTON:".js-rating_textbox-submit-btn",TOMATOMETER_OVERLAY:"#js-tomatometer-overlay",SHOW_SCOREBOARD_BTN:"#scoreModal_showScoreboardBtn",HIDE_SCOREBOARD_BTN:"#scoreModal_hideScoreboardBtn",USER_THUMBNAIL:".js-rating-widget-user-thumb",VERIFICATION_MODAL:"#verify-email-reminder",WANT_TO_SEE_BTN:".js-rating-wts-btn",WANT_TO_SEE_RATINGS_GROUP:".js-wts-ratings-group",USER_INFO_DESKTOP:".js-user-media-rating__user-info",USER_INFO_MOBILE:".js-user-rating-mobile__header",USER_RATING_REVIEW_COMMENT:".js-user-rating-mobile__comment",USER_RATING_WTS:".user-rating-mobile__wts",EDIT_BTN_VISIBILITY:".js-edit-review-btn-visibility",TICKET_VENODR_DROPDOWN_OPTION:".js-ticket-vendor_dropdown-option",TICKET_VENDOR_LEGAL_TEXT:".js-vas_legal-text",RATINGS_POPOVER:{AVERAGE_RATING:"#js-average-rating",FRESH_COUNT:"#js-fresh-count",REVIEW_COUNT:"#js-review-count",ROTTEN_COUNT:"#js-rotten-count",TOMATOMETER_POPOVER_ICON:"#js-popover-tomatometer-icon",TOMATOMETER_POPOVER_SCORE:"#js-popover-tomatometer-score",TOMATOMETER_PROGRESS:"#js-tomatometer-progress"},SUPER_REVIEWER:".js-super-reviewer",MULTIPAGE_MODAL:".js-multi-page-modal",EDIT_REVIEW_BTN:".js-edit-review-btn"},o=185,i=0,r=1,s=2,T=[4,5,6],t=null,c="",l=null,R="SENT",d="Could not send",e={FANDANGO:{NAME:"Fandango",VALUE:"FANDANGO"}},E={Fandango:"FANDANGO"},_={mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType,mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,userInfo:null,userRating:null,wtsSelected:!1},u={HIDE:"hide",RATE_AND_REVIEW_MODAL_HIDDEN:"rate-and-review--hidden",SUPER_REVIEWER_HIDDEN:"super-reviewer-badge--hidden",star:{FILLED:"star-display__filled",HALF:"star-display__half",EMPTY:"star-display__empty",MOBILE_STAR:"star-display__mobile-half",STATIC_STAR:"star-display__static-half"},starDisplays:{DESKTOP:"star-display__desktop",MOBILE:"star-display__mobile"},wts:{SELECTED:"button--wts-selected",PRE_RELEASE:"wts--preRelease",POST_RELEASE:"wts--postRelease"}};function I(e){e.removeClass(Object.values(u.star).join(" "))}function m(i){i=parseFloat(i),$(a.RATING_STAR).each(function(){var e,t=parseFloat($(this).data("rating-value")),o=$(this).parent();(o.hasClass(u.starDisplays.DESKTOP)||o.hasClass(u.starDisplays.MOBILE))&&(I(o),$('[data-rating-value="'+i+'"]').parent().addClass(Number.isInteger(i)?u.star.FILLED:u.star.HALF),o.hasClass(Object.values(u.star).join(" "))||(e=t<i?u.star.FILLED:u.star.EMPTY),o.addClass(e))})}function A(e){m(e.initialScore),function(e){$(a.REVIEW_TEXT_AREA).val(e||"")}(e.initialReview),function(e){var t="";if(0!==e){var o=$('.star-display__mobile-half[data-rating-value="'+e+'"]');t=o.data("rating-value")+" stars: "+o.data("title")}$(a.RATING_MODAL_STAR_MEANINGS).html(t)}(e.initialScore),$(a.RATING_MODAL).modal(u.HIDE)}function S(){var e=$(this);e.addClass("disabled").html("Sending..."),RottenTomatoes.auth.emailConfirmation().done(function(){e.html(R),setTimeout(function(){$(a.VERIFICATION_MODAL).modal(u.HIDE)},1e3)}).catch(function(){e.html(d)})}function v(t){RottenTomatoes.auth.emailStatus().done(function(e){if(function(e){return!!RottenTomatoes.cookie.getCookie("auth_user")&&(T.includes(e)||"FBK"===RottenTomatoes.cookie.getCookie("loginPlatform"))}(e.body.emailStatusId))return t();$(a.VERIFICATION_MODAL).modal({show:!0}),e.body.emailStatusId===i||e.body.emailStatusId===r||e.body.emailStatusId===s?($(a.RATING_MODAL_FOOTER).addClass(u.HIDE),$(a.MSG_CONTACT_US).removeClass(u.HIDE),$(a.MSG_VERIFY_USER).addClass(u.HIDE),$(a.RATING_MODAL_TITLE).html("Hi there")):($(a.MSG_VERIFY_USER).removeClass(u.HIDE),$(a.MSG_CONTACT_US).addClass(u.HIDE),$(a.RATING_MODAL_FOOTER).removeClass(u.HIDE),$(a.RATING_MODAL_TITLE).html("Real Quick"),$(a.RESEND_EMAIL_BTN).on("click",S))})}function C(e){t.html(e).show().fadeOut(2500)}function f(){var e=$(a.WANT_TO_SEE_BTN),t=$(a.RATING_MODAL_MBL_BTN),o=_.wtsSelected;_.userRating&&_.userRating.score&&"-"!==_.userRating.score&&!o?(0!==l.initialScore&&(e.addClass(u.HIDE),t.addClass(u.HIDE)),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(a.RATING_WIDGET).removeClass(u.HIDE)):(e.removeClass(u.HIDE),t.removeClass(u.HIDE),RottenTomatoes.context&&RottenTomatoes.context.seasonId&&$(a.RATING_WIDGET).addClass(u.HIDE))}function O(){var e=$(a.WANT_TO_SEE_BTN);_.wtsSelected?e.addClass(u.wts.SELECTED):e.removeClass(u.wts.SELECTED),_.userRating&&_.userRating.score&&($(a.USER_RATING_WTS).addClass(u.HIDE),0!==l.initialScore&&$(a.EDIT_BTN_VISIBILITY).removeClass(u.HIDE),e.addClass(u.HIDE))}function N(){var e=$(a.RATING_STARS);switch(_.userRating&&_.userRating.score&&($(a.USER_RATING_WTS).addClass(u.HIDE),0!==l.initialScore&&$(a.EDIT_BTN_VISIBILITY).removeClass(u.HIDE)),_.userRating.score){case"+":break;case void 0:case null:e.find(a.RATING_STAR).removeClass("score");break;default:var t;(t=Number.parseFloat?Number.parseFloat(_.userRating.score,10):Number(_.userRating.score))&&(e.find(a.RATING_STAR).removeClass("score"),e.find('[data-rating-value="'+t+'"]').addClass("score"),m(_.userRating.score))}_.userRating.score&&($(a.RATING_STARS_MOBILE_WRAP).removeClass("text-center").addClass("review-present"),$(a.RATING_WIDGET_REVIEW_DESCRIPTION).addClass("hide"),$(a.RATING_MODAL_OPEN_BTN).addClass("hide"),e.removeClass("hide"))}function g(){var e=$(a.REVIEW_TEXT_AREA),t=_.userRating.review;t&&(e.val(function(e){if(!e)return null;var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?null:t.childNodes[0].nodeValue}(_.userRating.review)),t.length>o&&(t=_.userRating.review.substr(0,o).trim()+"...")),$(a.USER_RATING_REVIEW_COMMENT).html(t)}function D(){var e=$(a.USER_THUMBNAIL),t=_.userInfo?_.userInfo.thumbnailUrl:"",o=_.userInfo?_.userInfo.profileUrl:"";t&&(c=$(a.USER_THUMBNAIL).attr("src")),$(a.USER_THUMBNAIL).attr("src",t||c),e.parent().attr("href",o)}function w(){RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.FAIL_RATING_POST,{})}function L(e,t,o){if(n&&n.hasProfanity(t))return window.alert("Your review does not meet our community guidelines. Please edit out any offensive language and try again.");if(!function(e){if(!e)return!1;return RottenTomatoes.context.popcornMeterState,!0}(e))return C("Please choose a rating first.");RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.REVIEW_SUBMISSION_STARTED);var i={mediaId:_.mediaId,mediaType:_.mediaType,displayName:_.userInfo?(_.userInfo.firstName||"")+" "+(_.userInfo.lastName&&_.userInfo.lastName.slice(0,1)||""):"",facebookId:_.userInfo&&_.userInfo.fb_id,isSuperReviewer:_.userInfo&&_.userInfo.isSuperReviewer,score:e,reviewText:t,partnerId:E[o]};RottenTomatoes.rating.updateRating(i).then(function(e){return _.userRating=e,_.userRating.partnerText=o,l={initialScore:e.score||0,initialReview:e.review||""},"tv"===_.mediaType&&C("Review posted."),N(),g(),f(),RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,_.userRating),null}).catch(w)}function p(){v(function(){return function(){var e={mediaId:_.mediaId,mediaType:_.mediaType,createWtsWithRtId:RottenTomatoes.context.createWtsWithRtId};_.wtsSelected?RottenTomatoes.rating.deleteWTS(e).then(function(){_.wtsSelected=!1,O(),f()}).catch(w):RottenTomatoes.rating.createWTS(e).then(function(){_.wtsSelected=!0,O(),f()}).catch(w)}()})}function h(e){$(this).hasClass(u.star.MOBILE_STAR)||(_.userRating.score=$(e.target).data("ratingValue"),N(),f())}function M(){$(a.RATING_MODAL).modal("show")}function B(e){var t,o=$(a.REVIEW_TEXT_AREA).first().val(),i=e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.buttonType;t="desktop"===i?$(a.DROPDOWN_TRIGGER).attr("value"):$(a.DROPDOWN_TRIGGER).eq(1).attr("value"),v(function(){return L(_.userRating.score,o,t)})}function b(e){$(a.WANT_TO_SEE_BTN)[e]("click touch",p),$(a.RATING_STAR)[e]("click touch",h),$(a.RATING_MODAL_BTN)[e]("click touch",M),$(a.USER_RATING_REVIEW_COMMENT)[e]("click touch",M),$(a.SUBMIT_BUTTON)[e]("click touch",B)}function V(e){C("We couldn't retrieve the rating.")}function U(){_.userRating&&_.userRating.isVerified&&($(a.DROPDOWN_TRIGGER).text(e.FANDANGO.NAME),$(a.DROPDOWN_TRIGGER).attr("value",e.FANDANGO.VALUE))}function G(){return O(),N(),g(),f(),b("on"),null}function P(e){_.userInfo?Object.assign(_.userInfo||{},e):_.userInfo=e,$(a.USER_INFO_MOBILE).removeClass(u.HIDE),$(a.USER_INFO_DESKTOP).removeClass(u.HIDE),_.userInfo&&(D(),_.userInfo.isCritic&&$(a.ADD_ARTICLE_BUTTON).removeClass(u.HIDE));var t={mediaId:_.mediaId,mediaType:_.mediaType};RottenTomatoes.rating.getWTS(t).then(function(e){return _.wtsSelected=!!e&&e.wtsSelected,RottenTomatoes.rating.getRating(t)}).then(function(e){e.isSuperReviewer&&$(a.SUPER_REVIEWER).removeClass(u.SUPER_REVIEWER_HIDDEN),_.userRating=e;var t=(l={initialScore:e.score||0,initialReview:e.review||""}).initialScore;if(t){var o=$('.js-modal-star-rating[data-rating-value="'+t+'"]').data("title");$(a.RATING_MODAL_STAR_MEANINGS).html(t+" stars: "+o)}}).then(G).then(U).catch(V)}function k(){return RottenTomatoes.dtmData.customerId||$(a.LOGIN_MODAL).modal("show"),!1}function H(){_.userInfo=null,_.userRating=null,_.wtsSelected=null,$(a.USER_INFO_MOBILE).addClass(u.HIDE),$(a.USER_INFO_DESKTOP).addClass(u.HIDE),$(a.ADD_ARTICLE_BUTTON).addClass(u.HIDE),D(),O(),N(),g(),f(),b("off")}function y(e){e.initialScore===(_.userRating.score||0)&&e.initialReview===$(a.REVIEW_TEXT_AREA).val()?$(a.RATING_MODAL).modal(u.HIDE):function(e){window.confirm("Are you sure you want to discard your review?")&&A(e)}(e)}!function(){$(a.CRITIC_FILTER_LINK).on("click",function(){return $(".js-critics-filter-link.bold").removeClass("bold"),$(this).addClass("bold"),!1}),$(a.REVIEW_TEXT_AREA).on("click touch",k),$(a.RATING_STAR).on("click touch",k),$(a.SUBMIT_BUTTON).on("click touch",k),$(a.WANT_TO_SEE_BTN).on("click touch",k),$(a.RATING_MODAL_BTN).on("click touch",k),$(a.REVIEW_TEXT_AREA).on("keyup",function(){$(a.REVIEW_TEXT_AREA).not(this).val($(this).val())}),RottenTomatoes.context.badWordsList&&function(){var e;try{e=JSON.parse(window.atob(RottenTomatoes.context.badWordsList))}catch(e){}var t=RottenTomatoes.profanityFilter;t&&e&&(n=(new t).loadBadWords(e))}();var e=RottenTomatoes.context.isPreRelease?u.wts.PRE_RELEASE:u.wts.POST_RELEASE;$(a.WANT_TO_SEE_RATINGS_GROUP).addClass(e),t=$(a.POST_REVIEW_FEEDBACK),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,P),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,H),f(),$(a.RATING_STAR).on("mouseover",function(){var e=$(this);if(!e.hasClass(u.star.MOBILE_STAR)){var t,o=e.parent(),i=e.data("side"),n=parseFloat(e.data("rating-value"));"left"===i?t=u.star.HALF:"right"===i&&(t=u.star.FILLED),function(i){$(a.RATING_STAR).each(function(){var e,t=parseFloat($(this).data("rating-value")),o=$(this).parent();I(o),e=t<i?u.star.FILLED:u.star.EMPTY,o.addClass(e)})}(n),I(o),o.addClass(t)}}),$(a.RATING_STAR).on("mouseleave",function(){l&&m(l.initialScore)}),$(a.RATING_STAR).on("click touch",function(){var e=$(this);RottenTomatoes.dtmData.customerId&&(e.hasClass(u.star.MOBILE_STAR)||e.hasClass(u.star.STATIC_STAR)?RottenTomatoes.rateAndReview.mobileInit():RottenTomatoes.rateAndReview.desktopInit(e.data("rating-value")),RTLocals.rateAndReview.ui.openRateAndReviewModal())}),$(a.TICKET_VENODR_DROPDOWN_OPTION).on("click touch",function(e){var t=$(a.TICKET_VENDOR_LEGAL_TEXT);void 0===e.target.attributes.disabled?t.removeClass(u.HIDE):t.hasClass(u.HIDE)||t.addClass(u.HIDE)}),$(a.RATING_MODAL_CLOSE_BTN).on("click touch",function(){y(l)}),$(a.RATING_MODAL).on("click touch",function(e){e.target===e.currentTarget&&y(l)})}()}(),function(){var n,e,i={DROPDOWN_TRIGGER:".js-rt-dropdown-trigger",MODAL_STAR_RATING:".js-modal-star-rating",PRODUCT_BLOG_URL:".js-product-blog-url",RATING_WIDGET_STAR_MEANINGS:".js-rating__widget-modal--star-meanings",SATELLITE:".js-satellite",SUBMIT_MSG_WRAP:".js-review-submitted-message",SUBMIT_MSG_DRAWER:".js-rating-submission-message-drawer",SUBMIT_MSG_HEADER:".js-rating-submission-header",SUBMIT_MSG_COPY:".js-rating-submission-body",SUBMIT_TWITTER_BTN:".js-submission-drawer-twitter-link",SUBMIT_FACEBOOK_BTN:".js-submission-drawer-facebook-link",SUBMIT_MSG_REVIEW_INFO:".js-review-submitted-message__review-info",TEXTBOX:".js-rating_textbox-textarea",USER_NAME:".js-user-rating-mobile__username",REVIEW_INFO_CLOSE:".js-review-submitted-message__close-review-info"},a={HIDE:"hide"},r=(e=RottenTomatoes.context.reviewSubmissionConfirmationMessages.CODE_OF_CONDUCT_NOTICE,{BOUGHT_SOMEWHERE_ELSE:{header:RottenTomatoes.context.reviewSubmissionConfirmationMessages.THANK_YOU,reviewInfo:e},RATING_NON_VERIFIED:{header:RottenTomatoes.context.reviewSubmissionConfirmationMessages.THANK_YOU},REVIEW_NON_VERIFIED:{header:RottenTomatoes.context.reviewSubmissionConfirmationMessages.THANK_YOU,reviewInfo:e},RATING_VERIFIED:{header:RottenTomatoes.context.reviewSubmissionConfirmationMessages.THANK_YOU,copy:RottenTomatoes.context.reviewSubmissionConfirmationMessages.RATING_VERIFICATION_NOTICE},REVIEW_VERIFIED:{header:RottenTomatoes.context.reviewSubmissionConfirmationMessages.THANK_YOU,copy:RottenTomatoes.context.reviewSubmissionConfirmationMessages.REVIEW_VERIFICATION_NOTICE,reviewInfo:e}});var t={boughtSomewhereElse:"BOUGHT_SOMEWHERE_ELSE",ratingNonVerified:"RATING_NON_VERIFIED",ratingVerified:"RATING_VERIFIED",reviewNonVerified:"REVIEW_NON_VERIFIED",reviewVerified:"REVIEW_VERIFIED"},s={FANDANGO:"Fandango",BOUGHT_SOMEWHERE_ELSE:"Bought at a theater or somewhere else"},o=null,T=!1,c=!1,l={};function R(e,t){var o=r[e];if(l.messageHeader=o.header.replace("{{name}}",n),l.messageCopy=o.copy,l.messageReviewInfo=o.reviewInfo,l.showTwitterButton=!1,l.showFacebookButton=!1,"AMC"===t){var i=function(){var e=RottenTomatoes.context.movieDetails||{},t=e.movieDetailsURL?"".concat(RottenTomatoes.link.baseCanonicalUrl()).concat(e.movieDetailsURL):"";return"I watched ".concat(e.movieTitle," @AMCTheatres. Check out reviews on @RottenTomatoes. ").concat(t," #ShareAMC amctheatres.com")}();l.showTwitterButton=!0,l.showFacebookButton=!0,l.twitterShareLink="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(i)),l.facebookQuote=i}}function d(){if(l.messageHeader){$(i.SUBMIT_MSG_HEADER).text(l.messageHeader),l.messageCopy&&$(i.SUBMIT_MSG_COPY).text(l.messageCopy);var e=$(i.SUBMIT_TWITTER_BTN);l.showTwitterButton?(e.removeClass(a.HIDE),e.attr("href",l.twitterShareLink)):e.addClass(a.HIDE);var t=$(i.SUBMIT_FACEBOOK_BTN);l.showFacebookButton?(t.removeClass(a.HIDE),t.on("click",function(){return window.FB.ui({method:"share",href:"https://www.rottentomatoes.com".concat(window.location.pathname),quote:l.facebookQuote})})):t.addClass(a.HIDE),RottenTomatoes.mobileDrawer.openDrawer(i.SUBMIT_MSG_DRAWER)}var o=$(i.SUBMIT_MSG_REVIEW_INFO);l.messageReviewInfo&&0===o.text().trim().length&&($(i.SUBMIT_MSG_WRAP).removeClass("hide"),o.removeClass("hide"),o.append(l.messageReviewInfo)),0<o.text().trim().length&&($(i.SUBMIT_MSG_WRAP).removeClass("hide"),o.removeClass("hide")),$(i.REVIEW_INFO_CLOSE).on("click",function(){return o.addClass("hide"),!1}),c=!1}function E(e){c=!0,e&&e.displaySubmitMessage&&d()}function _(e){var t=e.firstName||"",o=e.lastName&&e.lastName.slice(0,1)||"";n=t,$(i.USER_NAME).text(t+" "+o)}function u(e){e.preventDefault(),RottenTomatoes.tracking.satelliteTrack("verify purchase learn more clicks"),window.open($(this).attr("href"))}function I(){$(i.PRODUCT_BLOG_URL).one("click",u)}function m(e){e||(RTLocals.rateAndReview.ui.disableVerificationElements(),RTLocals.rateAndReview.ui.changeSubmitBtnsToSpinners())}function A(e){e||(RTLocals.rateAndReview.ui.enableVerificationElements(),RTLocals.rateAndReview.ui.restoreSubmitBtns(),RottenTomatoes.multiPageModal.closeSubModal(),RTLocals.rateAndReview.ui.closeRateAndReviewModal(),RottenTomatoes.mobileDrawer.closeDrawer())}function S(e){A(e&&e.isImplicitPost),function(e){var t=e&&e.partnerId&&e.partnerId===s.FANDANGO,o=e&&e.score;RottenTomatoes.dtmData.verifyPurchase="",RottenTomatoes.dtmData.reviewStars=o,t&&o&&(RottenTomatoes.dtmData.verifyPurchase="1",RottenTomatoes.dtmData.verifyPurchaseType="fandango"),RottenTomatoes.tracking.satelliteTrack("fan review complete")}(e),function(e){e?e.partnerId===s.BOUGHT_SOMEWHERE_ELSE?R(t.boughtSomewhereElse):e.partnerId||e.review?!e.partnerId&&e.review?R(t.reviewNonVerified):e.partnerId&&!e.review?R(t.ratingVerified,e.partnerId):e.partnerId&&e.review&&R(t.reviewVerified,e.partnerId):R(t.ratingNonVerified):R(t.ratingNonVerified)}(e),c&&d()}function v(e){A(e),function(e){o.html(e).show().fadeOut(2500)}("We couldn't save the rating.")}function C(e){e.preventDefault(),$(i.RATING_WIDGET_STAR_MEANINGS).html($(this).data("rating-value")+" stars: "+$(this).data("title"))}function f(){T||(RottenTomatoes.dtmTracking.onReviewStart($(this).data("fanreviewstarttype")),T=!0)}$(i.MODAL_STAR_RATING).on("click touch",C),$(i.SATELLITE).on("click",f),RottenTomatoes.eventQ.register(RottenTomatoes.tooltip.EVENT_NAMES.TOOLTIP.OPEN,I),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,_),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.REVIEW_SUBMISSION_STARTED,m),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,S),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_MODAL_CLOSED,E),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.FAIL_RATING_POST,v),o=$(i.POST_REVIEW_FEEDBACK)}(),function(i){var e,n,t={WTS_COUNT:".js-rating_wts-count"},a={wtsNumbers:/(\d{1,3})/g};e=RottenTomatoes.context.wantToSeeData,n=e&&e.wantToSeeCount||0,e&&e.ratingsStartDate&&new Date(e.ratingsStartDate)>new Date&&n&&i(t.WTS_COUNT).each(function(){var e=i(this),t=n.toLocaleString("en");if(t.includes(",")){var o=t.match(a.wtsNumbers);t=o[0]+"."+o[1].substr(0,1)+(o.length<3?"K":"M")}t="("+t+")",e.text(t)})}(jQuery),function(){var o,i,t={SUB_MODAL:".js-multi-page-modal__sub-modal",MULTI_PAGE_MODAL:".js-multi-page-modal"},n="multi-page-modal__sub-modal-overlay--open",a={ESC:27};function r(e){var t=i[e];t&&t.htmlContainer&&t.actions&&(o.html($(t.htmlContainer).html()),t.actions())}function s(e){e.keyCode===a.ESC&&T()}function T(){$(t.MULTI_PAGE_MODAL+" "+t.SUB_MODAL).remove()}RottenTomatoes.multiPageModal={init:function(e,t){o=$(e),i=t,r(0)},loadPage:r,triggerSubModal:function(e){return $(t.MULTI_PAGE_MODAL).append($(e.htmlContainer).html()),$(t.SUB_MODAL).addClass(n),e.actions(),$(document).keydown(s),!1},closeSubModal:T}}(),function(){var i,e=".js-mobile-drawer-backdrop-close-btn",n={DRAWER_OPEN:"mobile-drawer--is-open",SCROLL_LOCK:"scroll-lock"},a={ESC:27};function t(){document.querySelector("body").classList.remove(n.SCROLL_LOCK),i&&document.querySelector(i).classList.remove(n.DRAWER_OPEN),i=null}function o(e){var t=document.querySelector(i),o=!!t&&t.classList.contains(n.DRAWER_OPEN);e.keyCode===a.ESC&&o&&t.classList.remove(n.DRAWER_OPEN)}RottenTomatoes.mobileDrawer={init:function(){document.addEventListener("keyup",o),[].slice.call(document.querySelectorAll(e)).forEach(function(e){e.addEventListener("click",t),e.addEventListener("touch",t)})},closeDrawer:t,openDrawer:function(e){document.querySelector("body").classList.add(n.SCROLL_LOCK),document.querySelector(e).classList.add(n.DRAWER_OPEN),i=e}}}(),function(){var e={SCORE_DETAIL_MODAL:".js-score-detail-modal",SCORE_DETAIL_MODAL_BACKGROUND:".js-score-detail-modal-background-overlay"},t="hide",o="noscroll",i=$(window).height(),n=window.matchMedia("only screen and (max-width: 760px)").matches;function a(){$(e.SCORE_DETAIL_MODAL).css("transition","transform .3s ease-out"),$(e.SCORE_DETAIL_MODAL).css("transform","translateY("+i+"px )")}RTLocals.scoreDetail=Object.assign(RTLocals.scoreDetail||{},{ui:{openScoreDetailModal:function(){$("body").addClass(o),$(e.SCORE_DETAIL_MODAL).removeClass(t),$(e.SCORE_DETAIL_MODAL_BACKGROUND).removeClass(t),n&&$(e.SCORE_DETAIL_MODAL).css("transform","translateY(0)")},closeScoreDetailModal:function(){$("body").removeClass(o),$(e.SCORE_DETAIL_MODAL).addClass(t),$(e.SCORE_DETAIL_MODAL_BACKGROUND).addClass(t),n&&a()},moveScoreDetailOutOfScreen:a}})}(),function(){var r;function s(e){return"POSITIVE"===e?"upright":"spilled"}function T(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}!function(){var e,t=RottenTomatoes.context.scoreBoardViewModel?RottenTomatoes.context.scoreBoardViewModel:{},o=RottenTomatoes.context.scoreInfo?RottenTomatoes.context.scoreInfo:{};if(t&&o){var i=!!Object.keys(t).length;e={audienceAll:o?o.audienceAll:{},audienceVerified:o?o.audienceVerified:{},tomatometerAllCritics:o?o.tomatometerAllCritics:{},tomatometerTopCritics:o?o.tomatometerTopCritics:{}},(r={hasData:i,iconSizeCSSClass:T()?"tiny":"small",isReleased:RottenTomatoes.context.movieDetails?RottenTomatoes.context.movieDetails.isReleased:"",releaseDate:RottenTomatoes.context.movieDetails?RottenTomatoes.context.movieDetails.releaseDate:"",showtimesLink:RottenTomatoes.link.webShowtimes(),verified:t.isVerified||!1,isPrerelease:t.isPrerelease||!1,canVerifyRatings:t.canVerifyRatings||!1,initialCriticProgress:0,initialAudienceProgress:0,showMobileRatings:T(),mediaType:RottenTomatoes.context.scoreBoardViewModel.mediaType}).tomatometerAllCritics=Object.assign({},e.tomatometerAllCritics,{activeBtn:"all"}),r.tomatometerTopCritics=Object.assign({},e.tomatometerTopCritics,{activeBtn:"top"}),r.audienceScoreVerified=Object.assign({},e.audienceVerified,{activeBtn:"verified",audienceClass:s(e.audienceVerified?e.audienceVerified.scoreSentiment:""),avgScore:e.audienceVerified?e.audienceVerified.averageRating:"",numberOfReviews:e.audienceVerified?e.audienceVerified.ratingCount:""});var n="tvSeries"===RottenTomatoes.context.scoreBoardViewModel.mediaType,a=n&&e.audienceAll?e.audienceAll.score:e.audienceAll.averageRating;r.audienceScoreAll=Object.assign({},e.audienceAll,{activeBtn:"all",audienceClass:n&&e.audienceAll?e.audienceAll.state:s(e.audienceAll?e.audienceAll.scoreSentiment:""),avgScore:a||"",numberOfReviews:e.audienceAll?e.audienceAll.ratingCount:""})}}(),RottenTomatoes.scoreDetailModel={getViewModel:r}}(),function(){var s={SCORE_DETAIL_PANEL:".js-score-detail-container",HELP_TOOL_TIP_TOMATOMETER:".js-score-detail-tomatometer-help",HELP_TOOL_TIP_AUDIENCE_SCORE:".js-score-detail-audience-score-help",DRAWER_HELP_TOMATOMETER:".js-score-detail-drawer-help-tomatometer",DRAWER_HELP_AUDIENCE_SCORE:".js-score-detail-drawer-help-audience-score",CRITICS_TOGGLE:".js-score-detail-critics-toggle",CIRCLE_WRAP:"#score-details-circle-wrap",TOMATOMETER_CIRCLE:"#tomatometer-score-circle",AUDIENCE_CIRCLE_WRAP:"#audience-circle-wrap",AUDIENCE_CIRCLE:"#audience-score-circle"},T={ACTIVE_CRITIC_TOGGLE:"score-detail__critic-toggle--active",TV_SERIES_TOOLTIP:"score-detail__help--tv-series-tomatometer"},o=window.matchMedia("only screen and (max-width: 760px)").matches,c=RottenTomatoes.scoreDetailModel.getViewModel,l=["all","top"],i=500,R="",d="";function n(e){e.preventDefault();var t,o,i,n=$(this),a=n.data("critics"),r=n.data("audience");if($(s.CRITICS_TOGGLE+(a?"[data-critics]":"[data-audience]")).removeClass(T.ACTIVE_CRITIC_TOGGLE),n.addClass(T.ACTIVE_CRITIC_TOGGLE),a){if(!l.includes(a))return;t="tomatometer"+RottenTomatoes.util.capitalize(a)+"Critics",o=c[t],i=$(s.TOMATOMETER_CIRCLE),RottenTomatoes.scoreDetailBreakdown.render(c[t],"tomatometer"),RottenTomatoes.ScoreCircle.update(i,o.score,R,o.tomatometerState),R=o.tomatometerState}r&&(t="audienceScore"+RottenTomatoes.util.capitalize(r),o=c[t],i=$(s.AUDIENCE_CIRCLE),RottenTomatoes.scoreDetailBreakdown.render(c[t],"audience"),RottenTomatoes.ScoreCircle.update(i,o.score,d,o.audienceClass),d=o.audienceClass)}function a(e,t){RottenTomatoes.context.scoreDetailDescription&&RottenTomatoes.context.scoreDetailDescription.tvSeriesTomatometerMsg&&e.addClass(T.TV_SERIES_TOOLTIP),e.on("click touch",function(){o&&RottenTomatoes.mobileDrawer.openDrawer(t)})}function e(){var e=nunjucks.render("_scoreDetail",{isReleased:c.isReleased,canVerifyRatings:c.canVerifyRatings,hasAudienceScore:!!c.audienceScoreAll.avgScore,releaseDate:c.releaseDate,mediaType:c.mediaType,numReviews:{audienceScoreAll:c.audienceScoreAll.numberOfReviews||0,audienceScoreVerified:c.audienceScoreVerified.numberOfReviews||0,tomatometerAllCritics:c.tomatometerAllCritics.numberOfReviews||0,tomatometerTopCritics:c.tomatometerTopCritics.numberOfReviews||0},hideNav:!c.tomatometerTopCritics.numberOfReviews&&!c.audienceScoreVerified.numberOfReviews});RottenTomatoes.modal.show(e,function(e){var t=$(s.HELP_TOOL_TIP_TOMATOMETER);RottenTomatoes.tooltip.initToolTip(t),a(t,s.DRAWER_HELP_TOMATOMETER),function(){var e=nunjucks.render("_scoreDetailsCircle",{circleId:s.TOMATOMETER_CIRCLE.replace("#",""),initialScore:c.tomatometerAllCritics.score,initialState:c.tomatometerAllCritics.tomatometerState,defaultIcon:"icon__NA"});$(s.CIRCLE_WRAP).html(e),RottenTomatoes.scoreDetailBreakdown.render(c.tomatometerAllCritics,"tomatometer"),R=c.tomatometerAllCritics.tomatometerState}();var o=$(s.HELP_TOOL_TIP_AUDIENCE_SCORE);RottenTomatoes.tooltip.initToolTip(o),a(o,s.DRAWER_HELP_AUDIENCE_SCORE),function(){var e=c.canVerifyRatings?c.audienceScoreVerified:c.audienceScoreAll,t=nunjucks.render("_scoreDetailsCircle",{circleId:s.AUDIENCE_CIRCLE.replace("#",""),initialScore:e.score,initialState:e.audienceClass,hasAudienceScore:!!c.audienceScoreAll.avgScore,defaultIcon:"icon__audience-empty"});$(s.AUDIENCE_CIRCLE_WRAP).html(t),RottenTomatoes.scoreDetailBreakdown.render(e,"audience"),d=e.audienceClass}(),setTimeout(function(){RottenTomatoes.ScoreCircle.init($(s.TOMATOMETER_CIRCLE)),RottenTomatoes.ScoreCircle.init($(s.AUDIENCE_CIRCLE))},i),$(s.CRITICS_TOGGLE).on("mouseup keypress touch",n),$(s.CRITICS_TOGGLE).on("mousedown",function(e){e.preventDefault()})})}$(s.SCORE_DETAIL_PANEL).on("click touch",function(){e()}),RottenTomatoes.mobileDrawer.init()}(),function(){var n={AMC_HELP_BTN:".js-amc-help-btn",AMC_HELP_DRAWER:".js-amc-help-drawer",BACK_MODAL_BTN:".js-back-multi-page-modal",CLOSE_MODAL_BTN:".js-close-multi-page-modal",EDIT_REVIEW_SUBMIT_BTN:"#edit-review-submit",MOBILE_DRAWER_KEEP_WRITING_BTN:".js-keep-writing-btn",SUBMIT_ONLY_RATING_BTN:".js-submit-only-rating-btn",EDIT_REVIEW_DISCARD_CHANGES_BTN:".js-discard-changes-btn",MULTI_PAGE_MODAL:".js-multi-page-modal",NEXT_SUBMIT_BTN:".js-next-submit-btn",CONTINUE_BTN:".js-continue-btn",REVIEW_TEXTAREA_COUNTER:".js-textarea-with-counter-item",STAR:".js-star-rating-draggable",STAR_SELECTED:".js-rating-star.score",STAR_DISPLAY:".js-star-display-desktop",SUB_MODAL_REMOVE_REVIEW_BTN:"#remove-review",SUB_MODAL_DISCARD_CHANGE_BTN:"#discard-review",SUB_MODAL_VERIFY_TICKET_BTN:"#verify-ticket",SUBMIT_RATING_AND_REVIEW_BTN:".js-submit-review",SUBMIT_WITHOUT_VERIFICATION_BTN:".js-submit-review-without-verification",VERIFIED_TICKET_VENDOR:".js-verified-ticket-vendor",VERIFIED_TICKET_EDIT_BUTTON:".js-verified-ticket-edit",VERIFIED_TICKET_INTPUT_ERROR_MESSAGE:".js-verify-ticket-input-error-message",VERIFIED_TICKET_NUMERICAL_INPUT:".js-verify-ticket-number-input",VERIFIED_TICKET_CANCEL_BUTTON:".js-verify-ticket-cancel-btn",VERIFIED_TICKET_INTERSTITIAL_DESKTOP:".js-verify-ticket-interstitial-container-desktop",DRAWER_INITIAL_REVIEW:".js-rating-submit-drawer-initial-review",DRAWER_EDIT_REVIEW:".js-rating-submit-drawer-edit-review"},a={VERIFIED_TICKET_VENDOR_SELECTED:"verify-ticket__theater--selected",VERIFIED_TICKET_VENDOR_SELECTED_INPUT_FOCUS:"verify-ticket__theater--selected-input-focus",VERIFIED_TICKET_NUMERICAL_INPUT:"verify-ticket__number-input",STAR_DISPLAY_FILLED:"star-display__filled",STAR_DISPLAY_HALF:"star-display__half",STAR_DISPLAY_EMPTY:"star-display__empty",STAR_SCORE:"score",HIDE:"hide"},t={INITIAL_RATE_AND_REVIEW:"review",INITIAL_INTERSTITIAL:"interstitial",INITIAL_VERIFICATION:"verify",EDIT_RATE_AND_REVIEW:"edit-review",EDIT_INTERSTITIAL:"edit-interstitial",EDIT_VERIFICATION:"edit-verify"},e={RATE_AND_REVIEW:0,INTERSTITIAL:1,VERIFICATION:2},o=13,i=32,r={pendingReview:{score:"0",review:"",partnerId:"",transactionId:""},userReview:null,userInfo:null},s=null,T=!1,c=!1;function l(){RottenTomatoes.multiPageModal.loadPage(e.VERIFICATION)}function R(){RTLocals.rateAndReview.ui.showUserMediaRatingError()}function d(e){var t=RottenTomatoes.formUI.starsRating.rating||r.pendingReview.score,o=RottenTomatoes.formUI.minimumCharacterCounter.textValue||r.pendingReview.review;RottenTomatoes.formUI.minimumCharacterCounter.minCountCheckPassed||""===o||(o=r.userReview.review),r=Object.assign(r||{pendingReview:{score:t,review:o,partnerId:r.pendingReview.partnerId,transactionId:r.pendingReview.transactionId}}),parseInt(r.pendingReview.score)===r.userReview.score&&r.pendingReview.review===r.userReview.review&&""===r.pendingReview.partnerId||RTLocals.rateAndReview.postReview(t,o,r.pendingReview.partnerId,r.pendingReview.transactionId,r.userInfo,e)}function E(){d(!0)}function _(){RTLocals.rateAndReview.ui.handleStarSelect(),r.pendingReview.score=RottenTomatoes.formUI.starsRating.rating}function u(e,t){$(t).addClass("hide"),$(e).removeClass("hide")}function I(){$(n.SUB_MODAL_VERIFY_TICKET_BTN).on("click",function(){RottenTomatoes.multiPageModal.closeSubModal()})}function m(){var e=$(n.SUBMIT_RATING_AND_REVIEW_BTN);e.off(),e.on("click",function(){var e=[].slice.call(document.querySelectorAll(n.VERIFIED_TICKET_VENDOR)).reduce(function(e,t){return e||t.classList.contains(a.VERIFIED_TICKET_VENDOR_SELECTED)},!1);if(RTLocals.rateAndReview.ui.clearInputErrorMessage(),"AMC"===r.pendingReview.partnerId&&!S())return RTLocals.rateAndReview.ui.displayInputErrorMessage();e||s!==t.INITIAL_VERIFICATION?d():(RottenTomatoes.multiPageModal.closeSubModal(),RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#verify-ticket-alert",actions:function(){I(),A()}}))})}function A(){$(n.SUBMIT_WITHOUT_VERIFICATION_BTN).on("click",function(){switch(s){case t.INITIAL_RATE_AND_REVIEW:case t.EDIT_RATE_AND_REVIEW:case t.EDIT_VERIFICATION:d();break;case t.INITIAL_VERIFICATION:RottenTomatoes.multiPageModal.closeSubModal(),RTLocals.rateAndReview.ui.closeRateAndReviewModal(!0)}})}function S(){var e=$(n.VERIFIED_TICKET_NUMERICAL_INPUT);return e.val()&&(10===e.val().length||0===e.val().length)&&e.val().match(/^[0-9]*$/)}function v(e){r.userInfo?Object.assign(r.userInfo||{},e):r.userInfo=e,RTLocals.rateAndReview.widget.renderUserName(r.userInfo),RTLocals.rateAndReview.widget.renderSuperReviewer(r.userInfo),RTLocals.rateAndReview.widget.renderUserThumbnail(r.userInfo);var t={mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType};RTLocals.rateAndReview.getReview(t).then(f).catch(R)}function C(){r.userInfo=null,r.userReview=null,r.pendingReview=null}function f(e){e&&(r.userReview=e,RTLocals.rateAndReview.widget.renderUserRatingScore(e.score),RTLocals.rateAndReview.widget.renderUserReview(e))}RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,v),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,C),RottenTomatoes.eventQ.register(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,f),RottenTomatoes.rateAndReview={state:r,mobileInit:function(){c=RottenTomatoes.context.canVerifyRatings;var e=r.userReview&&r.userReview.score||0,t=r.userReview&&r.userReview.review||"";(T=0<e)&&c?RTLocals.rateAndReview.modalSetup.mobile.verifiableEdit(r):T&&!c?RTLocals.rateAndReview.modalSetup.mobile.nonVerifiableEdit():!T&&c?RTLocals.rateAndReview.modalSetup.mobile.verifiableInitial():RTLocals.rateAndReview.modalSetup.mobile.nonVerifiableInitial(),RottenTomatoes.formUI.minimumCharacterCounter.init(t),RottenTomatoes.formUI.starsRating.init(e||"0"),RottenTomatoes.mobileDrawer.init(),$(n.STAR).on("click touchend",_)},desktopInit:function(e){c=RottenTomatoes.context.canVerifyRatings;var t=r.userReview&&r.userReview.score||0,o=r.userReview&&r.userReview.review||"";(T=0<t)&&c?RTLocals.rateAndReview.modalSetup.desktop.verifiableEdit(r,e):T&&!c?RTLocals.rateAndReview.modalSetup.desktop.nonVerifiableEdit():!T&&c?RTLocals.rateAndReview.modalSetup.desktop.verifiableInitial():RTLocals.rateAndReview.modalSetup.desktop.nonVerifiableInitial(),RottenTomatoes.formUI.minimumCharacterCounter.init(o),RottenTomatoes.formUI.starsRating.init(e||0),RottenTomatoes.mobileDrawer.init(),0<e&&_(),$(n.STAR).on("click touchend",_)},desktopInterstitialInit:function(){var e=RottenTomatoes.context.interstitialsConfig&&RottenTomatoes.context.interstitialsConfig.enableInterstitials||!1,i=document.querySelector(n.VERIFIED_TICKET_INTERSTITIAL_DESKTOP);e?(RottenTomatoes.context.interstitialsConfig&&RottenTomatoes.context.interstitialsConfig.explanations||[]).forEach(function(e){var t=RottenTomatoes.sanitizer.text(e&&e.color),o=i.querySelector("[class*="+t+"]");o.querySelector("p").innerText=RottenTomatoes.sanitizer.text(e&&e.explanation),o.querySelector("img").src=RottenTomatoes.sanitizer.url(e&&e.imageSrc)}):i.classList.add(a.HIDE)},setCurrentStep:function(e){s=e},isInputNumberTenDigit:S,modalFunctions:{registerInitialReviewCloseBtnHandler:function(){var e=$(n.CLOSE_MODAL_BTN);e.off(),e.on("click",function(){"0"!==r.pendingReview.score?RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#submit-review-alert",actions:function(){$(n.SUB_MODAL_REMOVE_REVIEW_BTN).on("click",function(){r=Object.assign(r||{pendingReview:{score:"0",review:"",partnerId:""}}),RTLocals.rateAndReview.ui.closeRateAndReviewModal(),RTLocals.rateAndReview.ui.returnRatingStarsToUnSelected()}),A()}}):RTLocals.rateAndReview.ui.closeRateAndReviewModal()})},registerKeepWritingButtonHandler:function(){$(n.MOBILE_DRAWER_KEEP_WRITING_BTN).on("click",RottenTomatoes.mobileDrawer.closeDrawer)},registerSubmitRatingAndReviewButtonHandler:m,registerContentResizeHandler:function(){window.addEventListener("resize",RTLocals.rateAndReview.ui.resizeScrollableArea)},registerSubmitOnlyButtonHandler:function(){$(n.SUBMIT_ONLY_RATING_BTN).on("click",function(){RottenTomatoes.mobileDrawer.closeDrawer(),d(),RottenTomatoes.formUI.minimumCharacterCounter.setTextValue(""),r.pendingReview.review="",c&&s===t.INITIAL_RATE_AND_REVIEW?(E(),l()):d()})},registerEditReviewDiscardChangesButtonHandler:function(){$(n.EDIT_REVIEW_DISCARD_CHANGES_BTN).on("click",function(){r=Object.assign(r||{pendingReview:{score:r.userReview.score,review:r.userReview.review,partner:""}}),RottenTomatoes.mobileDrawer.closeDrawer(),RTLocals.rateAndReview.ui.closeRateAndReviewModal()})},registerSubmitRatingWithoutVerificationHandler:A,registerEditReviewCloseBtnHandler:function(){var e=$(n.CLOSE_MODAL_BTN);e.off(),e.on("click",function(){!function(){var e;e=null===r.userReview.review?""===RottenTomatoes.formUI.minimumCharacterCounter.textValue:r.userReview.review===RottenTomatoes.formUI.minimumCharacterCounter.textValue;return r.userReview.score===parseFloat(RottenTomatoes.formUI.starsRating.rating)&&e}()?RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#discard-review-change-alert",actions:function(){$(n.SUB_MODAL_DISCARD_CHANGE_BTN).on("click",function(){r=Object.assign(r||{pendingReview:{score:r.userReview.score,review:r.userReview.review,partnerId:""}}),RTLocals.rateAndReview.ui.closeRateAndReviewModal()}),m()}}):RTLocals.rateAndReview.ui.closeRateAndReviewModal()})},registerNextSubmitButtonHandler:function(){$(n.NEXT_SUBMIT_BTN).on("click",function(){"0"!==r.pendingReview.score&&(RottenTomatoes.formUI.minimumCharacterCounter.minCountCheckPassed?c?(E(),l()):d():RottenTomatoes.mobileDrawer.openDrawer(n.DRAWER_INITIAL_REVIEW))})},registerVerifyCloseBtnHandler:function(){var e=$(n.CLOSE_MODAL_BTN);e.off(),e.on("click",function(){RottenTomatoes.multiPageModal.triggerSubModal({htmlContainer:"#verify-ticket-alert",actions:function(){I(),A()}})})},registerInputCancelBtnHandler:function(){var e=$(n.VERIFIED_TICKET_CANCEL_BUTTON);e.on("focus",function(e){$(this).closest(n.VERIFIED_TICKET_VENDOR).addClass(a.VERIFIED_TICKET_VENDOR_SELECTED_INPUT_FOCUS)}),e.on("click",function(e){var t=$(this);t.closest(n.VERIFIED_TICKET_VENDOR).addClass(a.VERIFIED_TICKET_VENDOR_SELECTED_INPUT_FOCUS),r.pendingReview.transactionId=t.val();var o=t.siblings(n.VERIFIED_TICKET_NUMERICAL_INPUT).val("");o.val(""),o.focus(),e.stopPropagation(),t.addClass(a.HIDE)})},registerVerifiedTicketProviderSelectHandler:function(){$(n.VERIFIED_TICKET_VENDOR).on("click keyup",function(e){1!==e.which&&13!==e.which||($(this).blur(),function(e){RTLocals.rateAndReview.ui.updateVerifiedTicketProvider(e),r.pendingReview.partnerId=$(e).data("vendor"),r.pendingReview.transactionId=$(e).find(n.VERIFIED_TICKET_NUMERICAL_INPUT).val()}(this))})},registerEditVerifiedTicketButtonHandler:function(){$(n.VERIFIED_TICKET_EDIT_BUTTON).on("click",function(){r.pendingReview.score=RottenTomatoes.formUI.starsRating.rating,r.pendingReview.review=RottenTomatoes.formUI.minimumCharacterCounter.textValue,l()})},registerEditReviewSubmitButton:function(){$(n.EDIT_REVIEW_SUBMIT_BTN).on("click",function(){if(RTLocals.rateAndReview.ui.clearInputErrorMessage(),"AMC"===r.pendingReview.partnerId&&!S())return RTLocals.rateAndReview.ui.displayInputErrorMessage();RottenTomatoes.formUI.minimumCharacterCounter.minCountCheckPassed?d():""!==(RottenTomatoes.formUI.minimumCharacterCounter.textValue||r.pendingReview.review)?(function(){if(Number(r.pendingReview.score)!==Number(r.userReview.score))return u(n.SUBMIT_ONLY_RATING_BTN,n.EDIT_REVIEW_DISCARD_CHANGES_BTN);u(n.EDIT_REVIEW_DISCARD_CHANGES_BTN,n.SUBMIT_ONLY_RATING_BTN)}(),RottenTomatoes.mobileDrawer.openDrawer(n.DRAWER_EDIT_REVIEW)):d()})},registerBackModalHandler:function(){$(n.BACK_MODAL_BTN).on("click",function(){RottenTomatoes.multiPageModal.loadPage(e.RATE_AND_REVIEW),RottenTomatoes.formUI.minimumCharacterCounter.init(r.pendingReview.review),RottenTomatoes.formUI.starsRating.init(r.pendingReview.score),$(n.VERIFIED_TICKET_EDIT_BUTTON).html(r.pendingReview.partner||"Select ticket provider")})},registerInterstitialContinueBtnHandler:function(){$(n.CONTINUE_BTN).on("click",function(){RTLocals.rateAndReview.interstitial.stopInterstitialSequence(),RottenTomatoes.multiPageModal.loadPage(e.VERIFICATION)})},registerAMCHelpButtonHandler:function(){$(n.AMC_HELP_BTN).on("click touch",function(){RottenTomatoes.mobileDrawer.openDrawer(n.AMC_HELP_DRAWER)}),$(n.AMC_HELP_BTN).on("keyup",function(){event.keyCode!==o&&event.keyCode!==i||RottenTomatoes.mobileDrawer.openDrawer(n.AMC_HELP_DRAWER)})},registerInputHandler:function(){$(n.VERIFIED_TICKET_NUMERICAL_INPUT).on("click focusin",function(e){$(this).closest(n.VERIFIED_TICKET_VENDOR).addClass(a.VERIFIED_TICKET_VENDOR_SELECTED_INPUT_FOCUS),e.stopPropagation()}),$(n.VERIFIED_TICKET_NUMERICAL_INPUT).on("focusout",function(e){$(this).closest(n.VERIFIED_TICKET_VENDOR).removeClass(a.VERIFIED_TICKET_VENDOR_SELECTED_INPUT_FOCUS)}),$(n.VERIFIED_TICKET_NUMERICAL_INPUT).on("input",function(e){var t=$(this);if(10<t.val().length&&46!==e.which&&8!==e.which)return t.val(t.val().slice(0,-1)),e.preventDefault();r.pendingReview.transactionId=t.val(),0!==t.val().length?$(n.VERIFIED_TICKET_CANCEL_BUTTON).removeClass(a.HIDE):$(n.VERIFIED_TICKET_CANCEL_BUTTON).addClass(a.HIDE)})},checkVerificationStatusForMobileEdit:function(){r.userReview&&!0===r.userReview.isVerified&&($(n.VERIFIED_TICKET_EDIT_BUTTON).text(r.userReview.submittedPartnerId),$(n.VERIFIED_TICKET_EDIT_BUTTON).removeClass("edit-review__vas-provider-arrow"),$(n.VERIFIED_TICKET_EDIT_BUTTON).off())}}}}(),function(){var o=".js-multi-page-modal",e="review",t="interstitial",i="verify",n="edit-review",a="edit-interstitial",r="edit-verify",s="#rate-and-review-submission",T="#edit-review-submission",c="#vas-submission",l="#edit-vas-submission",R="#interstitial";function d(){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:s,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(e),RottenTomatoes.rateAndReview.modalFunctions.registerInitialReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingWithoutVerificationHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerNextSubmitButtonHandler()}}])}function E(){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:T,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(n),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewDiscardChangesButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingWithoutVerificationHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewSubmitButton()}}])}RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{modalSetup:{desktop:{verifiableInitial:function(){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:s,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(e),RottenTomatoes.rateAndReview.modalFunctions.registerInitialReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerNextSubmitButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler()}},{htmlContainer:null},{htmlContainer:c,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(i),RottenTomatoes.rateAndReview.desktopInterstitialInit(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifyCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerAMCHelpButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputCancelBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputHandler()}}])},verifiableEdit:function(e,t){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:T,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(n),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditVerifiedTicketButtonHandler(t),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewSubmitButton(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewDiscardChangesButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputCancelBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerAMCHelpButtonHandler(),RTLocals.rateAndReview.verifyTicket.setVerifiedTicketProvider(e.userReview)}},{htmlContainer:l,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(r),RottenTomatoes.rateAndReview.modalFunctions.registerBackModalHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerAMCHelpButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputCancelBtnHandler()}}])},nonVerifiableInitial:d,nonVerifiableEdit:E},mobile:{verifiableInitial:function(){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:s,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(e),RottenTomatoes.rateAndReview.modalFunctions.registerInitialReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerNextSubmitButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler()}},{htmlContainer:R,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(t),RottenTomatoes.rateAndReview.modalFunctions.registerVerifyCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInterstitialContinueBtnHandler()}},{htmlContainer:c,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(i),RottenTomatoes.rateAndReview.modalFunctions.registerVerifyCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerAMCHelpButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputCancelBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputHandler(),RTLocals.rateAndReview.ui.changeVerifyTicketContentPadding()}}])},verifiableEdit:function(e){RottenTomatoes.multiPageModal.init(o,[{htmlContainer:T,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(n),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditVerifiedTicketButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewSubmitButton(),RottenTomatoes.rateAndReview.modalFunctions.registerKeepWritingButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitOnlyButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewDiscardChangesButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RottenTomatoes.rateAndReview.modalFunctions.checkVerificationStatusForMobileEdit()}},{htmlContainer:R,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(a),RottenTomatoes.rateAndReview.modalFunctions.registerVerifyCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInterstitialContinueBtnHandler()}},{htmlContainer:l,actions:function(){RottenTomatoes.rateAndReview.setCurrentStep(r),RottenTomatoes.rateAndReview.modalFunctions.registerBackModalHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerEditReviewCloseBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerVerifiedTicketProviderSelectHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerSubmitRatingAndReviewButtonHandler(),RTLocals.rateAndReview.ui.changeVerifyTicketContentPadding(),RTLocals.rateAndReview.verifyTicket.setVerifiedTicketProvider(e.userReview),RottenTomatoes.rateAndReview.modalFunctions.registerInputCancelBtnHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerInputHandler(),RottenTomatoes.rateAndReview.modalFunctions.registerAMCHelpButtonHandler()}}])},nonVerifiableInitial:d,nonVerifiableEdit:E}}})}(),function(){var r,e=".js-resubmit-btn",t=".js-rating-widget-edit-icon-btn",s={HIDE:"hide"},T={ResubmitButton:{LOADING:"Submitting...",TEXT:"Submit review"},PROFANITY_ALERT:"Your review does not meet our community guidelines. Please edit out any offensive language and try again."},c={mediaType:RottenTomatoes.context.ratingMediaInfo.mediaType,mediaId:RottenTomatoes.context.ratingMediaInfo.mediaId,userInfo:null,pendingReview:null},l=null,R=$(e),d=$(t);function E(e,t,o,i,n){RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.REVIEW_SUBMISSION_STARTED,n),navigator&&navigator.onLine||(I(e,t,o,i),u(n)),RTLocals.rateAndReview.verifyEmailStatus(function(){return _(e,t,o,i,n)})}function _(e,t,o,i,n){if(r&&r.hasProfanity(t))return window.alert(T.PROFANITY_ALERT);I(e,t,o,i);var a={mediaId:c.mediaId,mediaType:c.mediaType,displayName:function(){var e=c.userInfo.firstName||"",t=c.userInfo.lastName&&c.userInfo.lastName.slice(0,1)||"";return e+" "+t}(),facebookId:c.userInfo&&c.userInfo.fb_id,isSuperReviewer:c.userInfo&&c.userInfo.isSuperReviewer,score:e,reviewText:t,partnerId:o,transactionId:i};return new Promise(function(t,e){RottenTomatoes.context.disableReviewSubmission?(u(n),e()):RottenTomatoes.rating.updateRating(a).then(function(e){e.partnerId=a.partnerId,e.isImplicitPost=n,l={initialScore:e.score||0,initialReview:e.review||""},RTLocals.rateAndReview.widget.renderUserRatingScore(e.score,l.initialScore),RTLocals.rateAndReview.widget.renderUserReview(e),RTLocals.rateAndReview.widget.renderWTS(e.score,l.initialScore),RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_POSTED,e),t()}).catch(function(){u(n),e()})})}function u(e){RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.FAIL_RATING_POST,e);var t=RottenTomatoes.rateAndReview.state.userReview.score,o=c.pendingReview&&c.pendingReview.score,i=c.pendingReview&&c.pendingReview.reviewText;RTLocals.rateAndReview.widget.renderUserRatingScore(o),RTLocals.rateAndReview.widget.renderUserReview({review:i}),RTLocals.rateAndReview.widget.renderWTS(o,t),RTLocals.rateAndReview.ui.reviewPostFailureMessage.show(),d.addClass(s.HIDE),R.removeClass(s.HIDE)}function I(e,t,o,i){c.pendingReview={score:e,reviewText:t,partnerId:o,transactionId:i}}RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{postReview:function(e,t,o,i,n,a){c.userInfo=n,function(){var e;try{e=JSON.parse(window.atob(RottenTomatoes.context.badWordsList))}catch(e){}var t=RottenTomatoes.profanityFilter;t&&e&&(r=(new t).loadBadWords(e))}(),E(e,t,o,i,a),R.off(),R.on("click",function(){!function(e,t,o,i){R.text(T.ResubmitButton.LOADING),_(e,t,o,i).then(function(){R.addClass(s.HIDE),d.removeClass(s.HIDE),RTLocals.rateAndReview.ui.reviewPostFailureMessage.hide()}).catch(function(){R.text(T.ResubmitButton.TEXT)})}(e,t,o,i)})}})}(),RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{getReview:function(e){return new Promise(function(t,o){RottenTomatoes.rating.getRating(e).then(function(e){t(e)}).catch(function(e){o(e)})})}}),function(){var o={VERIFICATION_MODAL:"#verify-email-reminder",MSG_CONTACT_US:".js-msg-contact-us",MSG_VERIFY_USER:".js-msg-verify-user",RESEND_EMAIL_BTN:".js-resend-email-btn",RATING_MODAL_FOOTER:".rating-modal-footer",RATING_MODAL_TITLE:".login-modal-title"},i={HIDE:"hide",DISABLED:"disabled"},t="SENT",n="Could not send",a=[4,5,6];function r(){var e=$(this);e.addClass(i.DISABLED).html("Sending..."),RottenTomatoes.auth.emailConfirmation().done(function(){e.html(t),setTimeout(function(){$(o.VERIFICATION_MODAL).modal(i.HIDE)},1e3)}).catch(function(){e.html(n)})}RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{verifyEmailStatus:function(t){RottenTomatoes.auth.emailStatus().done(function(e){if(function(e){if(RottenTomatoes.cookie.getCookie("auth_user"))return a.includes(e)||"FBK"===RottenTomatoes.cookie.getCookie("loginPlatform");return!1}(e.body.emailStatusId))return t();$(o.VERIFICATION_MODAL).modal({show:!0}),0===e.body.emailStatusId||1===e.body.emailStatusId||2===e.body.emailStatusId?($(o.RATING_MODAL_FOOTER).addClass(i.HIDE),$(o.MSG_CONTACT_US).removeClass(i.HIDE),$(o.MSG_VERIFY_USER).addClass(i.HIDE),$(o.RATING_MODAL_TITLE).html("Hi there")):($(o.MSG_VERIFY_USER).removeClass(i.HIDE),$(o.MSG_CONTACT_US).addClass(i.HIDE),$(o.RATING_MODAL_FOOTER).removeClass(i.HIDE),$(o.RATING_MODAL_TITLE).html("Real Quick"),$(o.RESEND_EMAIL_BTN).on("click",r))})}})}(),function(){var i,n,a,r,s,T,c,t={RATE_AND_REVIEW_MODAL:".js-multi-page-modal",INTERSTITIAL_CIRCLE_CHECK:".js-interstitial__circle--check",INTERSTITIAL_CIRCLE_TWO:".js-interstitial__circle--two",INTERSTITIAL_MAIN_COLOR:".js-interstitial__main-color",INTERSTITIAL_LIGHT_COLOR:".js-interstitial__light-color",INTERSTITIAL_IMAGE:".js-interstitial-image",INTERSTITIAL_EXPLANATION:".js-interstitial-explanation"},l={interstitial:{red:{BACKGROUND:"interstitial__background--red ",DARK_COLOR:"interstitial__color--dark-red",LIGHT_COLOR:"interstitial__color--light-red",DARK_CIRCLE:"interstitial__circle-color--dark-red",LIGHT_CIRCLE:"interstitial__circle-color--light-red"},green:{BACKGROUND:"interstitial__background--green",DARK_COLOR:"interstitial__color--dark-green",LIGHT_COLOR:"interstitial__color--light-green",DARK_CIRCLE:"interstitial__circle-color--dark-green",LIGHT_CIRCLE:"interstitial__circle-color--light-green"},blue:{BACKGROUND:"interstitial__background--blue",DARK_COLOR:"interstitial__color--dark-blue",LIGHT_COLOR:"interstitial__color--light-blue",DARK_CIRCLE:"interstitial__circle-color--dark-blue",LIGHT_CIRCLE:"interstitial__circle-color--light-blue"}}},R=!1;function d(){i.removeClass(l.interstitial.red.BACKGROUND).removeClass(l.interstitial.green.BACKGROUND).removeClass(l.interstitial.blue.BACKGROUND),n.removeClass(l.interstitial.red.LIGHT_COLOR).removeClass(l.interstitial.green.LIGHT_COLOR).removeClass(l.interstitial.blue.LIGHT_COLOR),a.removeClass(l.interstitial.red.DARK_COLOR).removeClass(l.interstitial.green.DARK_COLOR).removeClass(l.interstitial.blue.DARK_COLOR),T.removeClass(l.interstitial.red.LIGHT_CIRCLE).removeClass(l.interstitial.green.LIGHT_CIRCLE).removeClass(l.interstitial.blue.LIGHT_CIRCLE),c.removeClass(l.interstitial.red.DARK_CIRCLE).removeClass(l.interstitial.green.DARK_CIRCLE).removeClass(l.interstitial.blue.DARK_CIRCLE)}RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{interstitial:{startInterstitialSequence:function(){R=!0,i=$(t.RATE_AND_REVIEW_MODAL),n=$(t.INTERSTITIAL_LIGHT_COLOR),a=$(t.INTERSTITIAL_MAIN_COLOR),r=$(t.INTERSTITIAL_IMAGE),s=$(t.INTERSTITIAL_EXPLANATION),T=$(t.INTERSTITIAL_CIRCLE_CHECK),c=$(t.INTERSTITIAL_CIRCLE_TWO);var e=RottenTomatoes.context.interstitialsConfig&&RottenTomatoes.context.interstitialsConfig.explanations||[],o=0;e.forEach(function(t){setTimeout(function(){if(R){d();var e=RottenTomatoes.sanitizer.text(t&&t.color);"red"!==e&&"green"!==e&&"blue"!==e&&(e="red"),i.addClass(l.interstitial[e].BACKGROUND),n.addClass(l.interstitial[e].LIGHT_COLOR),a.addClass(l.interstitial[e].DARK_COLOR),T.addClass(l.interstitial[e].LIGHT_CIRCLE),c.addClass(l.interstitial[e].DARK_CIRCLE),r.attr("src",RottenTomatoes.sanitizer.url(t&&t.imageSrc)),s.text(RottenTomatoes.sanitizer.text(t&&t.explanation))}},o),o+=4500})},stopInterstitialSequence:function(){i.css("transition","none"),R=!1,d()}}})}(),function(){var s=".js-verify-ticket-header",T=".js-verified-ticket-vendor",c="verify-ticket__theater--success";RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{verifyTicket:{setVerifiedTicketProvider:function(e){var t=window.__RT__.getNamespace(e,"submittedPartnerId",null),o=window.__RT__.getNamespace(e,"submittedTransactionId",""),i=window.__RT__.getNamespace(e,"verificationStatus",null);if("DENIED"!==i&&t){var n="".concat(T,'[data-vendor="').concat(t,'"]'),a=document.querySelector(n);a&&a.click();var r=$(n).find("input");r.val(o),"VERIFIED"===i&&($(s).text("Same ticket provider as last time?"),a.classList.add(c),r.prop("disabled",!0))}}}})}(),function(){var o={NEXT_SUBMIT_BTN:".js-next-submit-btn",DISCARD_REVIEW_BTN:"#discard-review",RATE_AND_REVIEW_MODAL:".js-multi-page-modal",RATE_AND_REVIEW_MODAL_HEADER:".js-rate-and-review-modal-header",RATING_STAR:".js-star-rating-draggable",REVIEW_TEXTAREA_GROUP:".js-rate-and-review-textarea-group",REVIEW_TEXTAREA_HEADER:".js-rate-and-review-textarea-header",REVIEW_TEXTAREA:".js-textarea-with-counter-text",SUBMIT_BTN_EDIT_REVIEW:"#edit-review-submit",SUBMIT_BTN:".js-submit-review",SUBMIT_ONLY_RATING_BTN:".js-submit-only-rating-btn",SUBMIT_OR_NEXT_BTN:".js-next-submit-btn",SUBMIT_WO_VERIFICATION_BTN:".js-submit-review-without-verification",VERIFIED_TICKET_CONTENT:".js-verify-ticket-content",VERIFIED_TICKET_VENDOR:".js-verified-ticket-vendor",VERIFIED_TICKET_DISCLAIMER:".js-verified-ticket-disclaimer",VERIFIED_TICKET_BTN_GROUP:".js-verify-btn-group",VERIFIED_TICKET_LEGAL:".js-verify-ticket-legal",VERIFIED_TICKET_INPUT_MESSAGE_CONTAINER:".js-verified-ticket-input-message-container",VERIFIED_TICKET_INPUT_ERROR_MESSAGE:".js-verify-ticket-input-error-message",VERIFIED_TICKET_NUMBER_INPUT:".js-verify-ticket-number-input",WANT_TO_SEE_BTN:".js-rating-wts-btn",MORE_INFO_BTN:".js-mop-more-btn"},i={DISABLED:"disabled",HIDE:"hide",NO_SCROLL:"noscroll",RATE_AND_REVIEW_MODAL_HIDDEN:"rate-and-review--hidden",REVIEW_TEXTAREA_GROUP_HIDDEN:"rate-and-review__textarea-group--hidden",REVIEW_TEXTAREA_HEADER_HIDDEN:"rate-and-review__textarea-header--hidden",REVIEW_TEXTAREA_HEADER_ACTIVE:"rate-and-review__textarea-header--active",SUBMIT_BTN_GRAY:"rate-and-review__button--gray",VERIFIED_TICKET_VENDOR_SELECTED:"verify-ticket__theater--selected",VERIFIED_TICKET_INPUT_ERROR:"verify-ticket-number-input--error",VERIFIED_TICKET_INPUT_GRAYED:"verify-ticket__number-input--grayed-out"},e="Confirmation# should be 10 numerical digits",t='<span class="rate-and-review__btn--loading"></span>',n="FANDANGO",a=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),r=120,s=window.matchMedia("only screen and (max-width: 760px)").matches;function T(){var e=document.querySelector(o.VERIFIED_TICKET_BTN_GROUP).getBoundingClientRect().height+r+"px";document.querySelector(o.VERIFIED_TICKET_CONTENT).style.paddingBottom=e}var c="Submit",l="Submit",R="Submit",d="Submit & exit",E="Submit only my rating";function _(){$(o.VERIFIED_TICKET_INPUT_ERROR_MESSAGE).addClass(i.HIDE).html(""),$(o.VERIFIED_TICKET_NUMBER_INPUT).removeClass(i.VERIFIED_TICKET_INPUT_ERROR)}RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{ui:{displayInputErrorMessage:function(){$(o.VERIFIED_TICKET_INPUT_ERROR_MESSAGE).removeClass(i.HIDE).append(e),$(o.VERIFIED_TICKET_NUMBER_INPUT).addClass(i.VERIFIED_TICKET_INPUT_ERROR)},clearInputErrorMessage:_,closeRateAndReviewModal:function(e){$("body").removeClass(i.NO_SCROLL),function(){if(a&&!RottenTomatoes.context.newScoreDetailEnabled){var e=document.querySelector(o.MORE_INFO_BTN).getBoundingClientRect().top+window.pageYOffset;window.scrollTo(0,e-50)}}(),_(),$(o.RATE_AND_REVIEW_MODAL).addClass(i.RATE_AND_REVIEW_MODAL_HIDDEN),RottenTomatoes.eventQ.emit(RottenTomatoes.rating.EVENT_NAMES.RATING.RATING_MODAL_CLOSED,{displaySubmitMessage:e})},disableVerificationElements:function(){$(o.VERIFIED_TICKET_VENDOR).addClass(i.DISABLED),$(o.REVIEW_TEXTAREA).addClass(i.DISABLED),$(o.RATING_STAR).addClass(i.DISABLED),$(o.DISCARD_REVIEW_BTN).addClass(i.DISABLED),$(o.SUBMIT_BTN_EDIT_REVIEW).addClass(i.DISABLED),$(o.SUBMIT_BTN).addClass(i.DISABLED),$(o.SUBMIT_OR_NEXT_BTN).addClass(i.DISABLED),$(o.SUBMIT_WO_VERIFICATION_BTN).addClass(i.DISABLED),$(o.SUBMIT_ONLY_RATING_BTN).addClass(i.DISABLED),$(o.VERIFIED_TICKET_NUMBER_INPUT).addClass(i.VERIFIED_TICKET_INPUT_GRAYED)},enableVerificationElements:function(){$(o.VERIFIED_TICKET_VENDOR).removeClass(i.DISABLED),$(o.REVIEW_TEXTAREA).removeClass(i.DISABLED),$(o.RATING_STAR).removeClass(i.DISABLED),$(o.DISCARD_REVIEW_BTN).removeClass(i.DISABLED),$(o.SUBMIT_BTN_EDIT_REVIEW).removeClass(i.DISABLED),$(o.SUBMIT_BTN).removeClass(i.DISABLED),$(o.SUBMIT_OR_NEXT_BTN).removeClass(i.DISABLED),$(o.SUBMIT_WO_VERIFICATION_BTN).removeClass(i.DISABLED),$(o.SUBMIT_ONLY_RATING_BTN).removeClass(i.DISABLED),$(o.VERIFIED_TICKET_NUMBER_INPUT).removeClass(i.VERIFIED_TICKET_INPUT_GRAYED)},handleStarSelect:function(){$(o.REVIEW_TEXTAREA_GROUP).removeClass(i.REVIEW_TEXTAREA_GROUP_HIDDEN),$(o.REVIEW_TEXTAREA_HEADER).addClass(i.REVIEW_TEXTAREA_HEADER_ACTIVE).removeClass(i.REVIEW_TEXTAREA_HEADER_HIDDEN),$(o.NEXT_SUBMIT_BTN).removeAttr("disabled")},openRateAndReviewModal:function(){$("body").addClass(i.NO_SCROLL),$(o.RATE_AND_REVIEW_MODAL).removeClass(i.RATE_AND_REVIEW_MODAL_HIDDEN)},updateVerifiedTicketProvider:function(e){var t=$(e);$(o.VERIFIED_TICKET_VENDOR).removeClass(i.VERIFIED_TICKET_VENDOR_SELECTED).find(o.VERIFIED_TICKET_INPUT_MESSAGE_CONTAINER).addClass(i.HIDE),t.addClass(i.VERIFIED_TICKET_VENDOR_SELECTED).find(o.VERIFIED_TICKET_INPUT_MESSAGE_CONTAINER).removeClass(i.HIDE).find(o.VERIFIED_TICKET_NUMBER_INPUT).removeClass(i.VERIFIED_TICKET_INPUT_FOCUS),t.data("vendor")===n?document.querySelector(o.VERIFIED_TICKET_LEGAL).classList.contains("hide")&&($(o.VERIFIED_TICKET_LEGAL).removeClass("hide"),s&&T()):($(o.VERIFIED_TICKET_LEGAL).addClass("hide"),s&&T())},restoreSubmitBtns:function(){$(o.SUBMIT_BTN_EDIT_REVIEW).removeClass(i.SUBMIT_BTN_GRAY).html(c),$(o.SUBMIT_BTN).removeClass(i.SUBMIT_BTN_GRAY).html(l),$(o.SUBMIT_OR_NEXT_BTN).removeClass(i.SUBMIT_BTN_GRAY).html(R),$(o.SUBMIT_WO_VERIFICATION_BTN).removeClass(i.SUBMIT_BTN_GRAY).html(d),$(o.SUBMIT_ONLY_RATING_BTN).removeClass(i.SUBMIT_BTN_GRAY).html(E)},returnRatingStarsToUnSelected:function(){document.querySelectorAll(o.STAR_DISPLAY).forEach(function(e){e.classList.remove(i.STAR_DISPLAY_FILLED),e.classList.remove(i.STAR_DISPLAY_FILLED),e.classList.add(i.STAR_DISPLAY_EMPTY);for(var t=e.children,o=0;o<t.length;o+=1)t[o].classList.remove(i.STAR_SCORE)})},changeSubmitBtnsToSpinners:function(){c=$(o.SUBMIT_BTN_EDIT_REVIEW).html(),l=$(o.SUBMIT_BTN).html(),R=$(o.SUBMIT_OR_NEXT_BTN).html(),d=$(o.SUBMIT_WO_VERIFICATION_BTN).html(),E=$(o.SUBMIT_ONLY_RATING_BTN).html(),$(o.SUBMIT_BTN_EDIT_REVIEW).addClass(i.SUBMIT_BTN_GRAY).html(t),$(o.SUBMIT_BTN).addClass(i.SUBMIT_BTN_GRAY).html(t),$(o.SUBMIT_OR_NEXT_BTN).addClass(i.SUBMIT_BTN_GRAY).html(t),$(o.SUBMIT_WO_VERIFICATION_BTN).addClass(i.SUBMIT_BTN_GRAY).html(t),$(o.SUBMIT_ONLY_RATING_BTN).addClass(i.SUBMIT_BTN_GRAY).html(t)},changeVerifyTicketContentPadding:T}})}(),function(){var e=".js-rate-review-widget",t=".js-review-submitted-message__review-info",o=".js-review-submitted-message",i=".js-user-rating-error-header",n=".js-user-rating-error-text",a=".js-user-rating-error-close-button",r=".js-edit-review-btn",s=".js-rating-wts-btn",T="hide",c="review-submitted-message__review-info--error",l={header:"We had trouble submitting your review.",text:"Its not you, its us. You might have better luck if you try again in a minute."},R={header:"We had trouble retrieving your review.",text:"Its not you, its us. You might have better luck if you try again in a minute."},d=$(".js-user-rating-error");Object.assign(RTLocals.rateAndReview.ui||{},{reviewPostFailureMessage:{show:function(){$(o).removeClass(T),$(r).addClass(T),$(s).addClass(T),$(t).removeClass(T).addClass(c).html("<strong>"+l.header+"</strong><br />"+l.text)},hide:function(){$(o).addClass(T),$(t).addClass(T).addClass(c).html("<strong>"+l.header+"</strong><br />"+l.text)}},showUserMediaRatingError:function(){$(e).addClass(T),d.removeClass(T),$(a).on("click",function(){d.addClass(T)}),$(i).html(R.header),$(n).html(R.text)}})}(),function(){var a={EDIT_ICON_BTN:".js-rating-widget-edit-icon-btn",EDIT_REVIEW_BTN:".js-edit-review-btn",EDIT_REVIEW_MOBILE_BTN:".js-edit-review-mobile-btn",INITIAL_DESKTOP_STARS:".js-rating-widget-initial-desktop-stars",LOGIN_MODAL:"#login",RATINGS_MOBILE_WRAP:".js-rating-widget-mobile-wrap",RATING_MODAL_OPEN_BTN:".js-rating-widget-mobile-review-modal-button",REVIEW_DESCRIPTION:".js-rating-widget-mobile-add-review-text",REVIEWED_CONTAINER:".js-rating-widget-reviewed-container",RATING_STARS_MOBILE_WRAP:".js-rating-widget-mobile-stars-wrap",REVIEW_TEXTAREA:".js-rating-textbox-textarea",REVIEW_COMMENT:".js-rating-widget-comment",REVIEW_IS_VERIFIED:".js-rating-widget-is-verified",REVIEW_DURATION_SINCE_RATING_CREATION:".js-rating-widget-duration-since-rating-creation",STAR_RATING_STATIC:".js-star-rating-static",STAR_RATING_STATIC_SCORE:".js-star-rating-static.icon-star--checked",STARS_RATING_STATIC_CONTAINER:".js-stars-rating-static-container",SUPER_REVIEWER:".js-rating-widget-super-reviewer",USER_INFO_MOBILE:".js-rate-and-review-widget-mobile-header",USER_INFO_DESKTOP:".js-rate-and-review-widget-header",USER_NAME:".js-rating-widget-username",USER_THUMBNAIL:".js-rating-widget-user-thumb",WANT_TO_SEE_BTN:".js-rating-wts-btn",WIDGET_RATING_STAR:".js-modal-widget-star"},n={HIDE:"hide",ICON_STAR_CHECKED:"icon-star--checked",STAR_RATING_STATIC_MOBILE:"star-rating-static__mobile",STARS_RATING_CONTAINER_IS_NOT_RATED:"stars-rating__container--is-not-rated",SUPER_REVIEWER_HIDDEN:"super-reviewer-badge--hidden",WIDGET_EDIT_ICON_HIDDEN:"rate-and-review-widget__icon-edit--hidden",WIDGET_REVIEW_CONTAINER_HIDDEN:"rate-and-review-widget__reviewed-container--hidden",TEXT_CENTER:"text-center",REVIEW_PRESENT:"review-present"};function e(){RottenTomatoes.rateAndReview.mobileInit(),RTLocals.rateAndReview.ui.openRateAndReviewModal()}function t(){var e=window.matchMedia("only screen and (max-width: 760px)").matches,t=parseFloat($(a.STAR_RATING_STATIC_SCORE).data("rating"));RottenTomatoes.dtmData.customerId&&(e?(RottenTomatoes.rateAndReview.mobileInit(),RTLocals.rateAndReview.ui.openRateAndReviewModal()):RottenTomatoes.rateAndReview.desktopInit(t),RTLocals.rateAndReview.ui.openRateAndReviewModal())}function o(){$(a.USER_INFO_MOBILE).removeClass(n.HIDE),$(a.USER_INFO_DESKTOP).removeClass(n.HIDE)}function i(){$(a.USER_INFO_MOBILE).addClass(n.HIDE),$(a.USER_INFO_DESKTOP).addClass(n.HIDE)}$(a.EDIT_ICON_BTN).click(t),$(a.EDIT_REVIEW_MOBILE_BTN).click(t),$(a.REVIEW_TEXTAREA).click(t),$(a.RATING_MODAL_OPEN_BTN).click(e),$(a.STAR_RATING_STATIC).on("click touch",function(){var e=$(this);RottenTomatoes.dtmData.customerId?e.hasClass(n.STAR_RATING_STATIC_MOBILE)&&(RottenTomatoes.rateAndReview.mobileInit(),RTLocals.rateAndReview.ui.openRateAndReviewModal()):RottenTomatoes.dtmData.customerId||$(a.LOGIN_MODAL).modal("show")}),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGIN,o),RottenTomatoes.eventQ.register(RottenTomatoes.header.EVENT_NAMES.AUTH.LOGOUT,i),RTLocals.rateAndReview=Object.assign(RTLocals.rateAndReview||{},{widget:{renderUserName:function(e){var t=e.firstName||"",o=e.lastName&&e.lastName.slice(0,1)||"";$(a.USER_NAME).text(t+" "+o)},renderSuperReviewer:function(e){e.isSuperReviewer&&$(a.SUPER_REVIEWER).removeClass(n.SUPER_REVIEWER_HIDDEN)},renderUserThumbnail:function(e){var t,o=$(a.USER_THUMBNAIL),i=e.thumbnailUrl||"",n=e.profileUrl||"";i&&(t=$(a.USER_THUMBNAIL).attr("src")),o.attr("src",i||t),o.parent().attr("href",n)},renderUserRatingScore:function(e,t){var o=$(a.STARS_RATING_STATIC_CONTAINER);switch(t=t||"0",e&&($(a.WANT_TO_SEE_BTN).addClass(n.HIDE),0!==t&&$(a.EDIT_REVIEW_BTN).removeClass(n.HIDE)),e){case"+":break;case void 0:case null:o.find(a.STAR_RATING_STATIC).removeClass(n.ICON_STAR_CHECKED);break;default:var i;(i=Number.parseFloat?Number.parseFloat(e,10):Number(e))&&RottenTomatoes.starsRatingStatic.renderRating(i)}e&&($(a.RATINGS_MOBILE_WRAP).addClass(n.REVIEW_PRESENT),$(a.REVIEW_DESCRIPTION).addClass(n.HIDE),$(a.RATING_MODAL_OPEN_BTN).addClass(n.HIDE),$(a.REVIEW_TEXTAREA).addClass(n.HIDE),$(a.INITIAL_DESKTOP_STARS).addClass(n.HIDE),$(a.RATING_STARS_MOBILE_WRAP).removeClass(n.HIDE),$(a.STARS_RATING_STATIC_CONTAINER).removeClass(n.HIDE),$(a.EDIT_ICON_BTN).removeClass(n.WIDGET_EDIT_ICON_HIDDEN),$(a.REVIEWED_CONTAINER).removeClass(n.WIDGET_REVIEW_CONTAINER_HIDDEN))},renderUserReview:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.review||"";185<t.length&&(t=t.substr(0,185).trim()+"..."),t&&$(a.REVIEW_COMMENT).html(t).removeClass(n.HIDE),e.isVerified&&$(a.REVIEW_IS_VERIFIED).removeClass(n.HIDE),e.durationSinceRatingCreation&&$(a.REVIEW_DURATION_SINCE_RATING_CREATION).html(e.durationSinceRatingCreation).removeClass(n.HIDE)},renderWTS:function(e,t){var o=$(a.WANT_TO_SEE_BTN);e&&"-"!==e?t&&0!==t.initialScore&&o.addClass(n.HIDE):o.removeClass(n.HIDE)}}})}(),function(){var T={STARS_RATING_MODULE:"stars-rating-module",STAR_MESSAGE:".js-star-rating-message",STARS_GROUP:".js-stars-rating-group",STAR:".js-star-rating-draggable",STAR_TOOLTIP:".js-stars-rating-tooltip"},r={STARS_CONTAINER_IS_NOT_RATED:"stars-rating__container--is-not-rated",STARS:"icon-star",STARS_TOUCHED:"stars-rating__stars-group--touched",STARS_UNTOUCHED:"stars-rating__stars-group--untouched",STARS_DRAGGED:"stars-rating__container--isDragging",STARS_CHECKED:"icon-star--checked",STARS_RETURNED:"icon-star--returned",MESSAGE_TOUCHED:"stars-rating__msg--touched",MESSAGE_UNTOUCHED:"stars-rating__msg--untouched",MESSAGE_FOCUSED:"stars-rating__msg--focused",MESSAGE_UNFOCUSED:"stars-rating__msg--unfocused",STAR_TOOLTIP_HIDDEN:"stars-rating__tooltip--hidden"},c={HIDE_STAR_TOOLTIP:"hide_star_tooltip",NUMBER_OF_REVIEW_STARTS:"number_of_review_starts"},t={SPACE:32};function l(e){var t=e.target;window.matchMedia("only screen and (max-width: 760px)").matches&&o(),a(r.STARS_CONTAINER_IS_NOT_RATED),a(r.STARS_DRAGGED),document.querySelector(T.STARS_GROUP).dataset.originalRating=t.dataset.rating,s(t)}function R(e){e.keyCode===t.SPACE&&(e.preventDefault(),l(e))}function d(e){a(r.STARS_CONTAINER_IS_NOT_RATED),s(e.target)}function E(){"0"===document.querySelector(T.STARS_GROUP).dataset.originalRating?(n(r.STARS_CHECKED),I("0"),m(r.STARS_CONTAINER_IS_NOT_RATED)):s(document.querySelector(T.STAR+'[data-rating="'+this.dataset.originalRating+'"]'))}function _(e){var t=e.touches[0];e.preventDefault(),o(),function(o,i){var e=document.querySelector(T.STARS_GROUP),t=e.querySelectorAll(T.STAR);e.classList.remove(r.STARS_UNTOUCHED),e.classList.add(r.STARS_TOUCHED),m(r.STARS_DRAGGED),document.querySelectorAll(T.STAR_MESSAGE).forEach(function(e){e.classList.add(r.MESSAGE_TOUCHED),e.classList.remove(r.MESSAGE_UNTOUCHED)});var n=!1,a=-1/0;t.forEach(function(e,t){(function(e,t,o){var i=t<=4?-1:1,n=(3.3*i+5.8*(i<0?t-4:t-5)).toString()+"px";e.style.transition="transform .25s",e.style.transform="scale(1.6) translate("+n+", "+o+")"})(e,t,n?t-a==1?t%2==0?"-5px":"-10px":"-5px":"-10px"),function(e,t,o){var i=e.getBoundingClientRect(),n=i.left,a=i.top,r=i.width,s=i.height;return t<=n||n+r<=t||o<=a||a+s<=o}(e,o,i)||(s(e),a=t,n=!0)})}(t.clientX,t.clientY)}function o(){$(T.STAR_TOOLTIP).addClass(r.STAR_TOOLTIP_HIDDEN),RottenTomatoes.cookie.setCookie(c.HIDE_STAR_TOOLTIP,!0,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY)}function u(){var e=document.querySelector(T.STARS_GROUP),t=document.querySelector(T.STAR_MESSAGE);a(r.STARS_CONTAINER_IS_NOT_RATED),e.classList.add(r.STARS_UNTOUCHED),e.classList.remove(r.STARS_TOUCHED),t.classList.add(r.MESSAGE_UNTOUCHED),t.classList.remove(r.MESSAGE_TOUCHED),document.querySelectorAll(T.STAR_MESSAGE).forEach(function(e){e.classList.add(r.MESSAGE_UNTOUCHED),e.classList.remove(r.MESSAGE_TOUCHED)}),e.querySelectorAll(T.STAR).forEach(i),a(r.STARS_DRAGGED)}function i(e){e.style.transform="translate(0,0) scale(1)",e.style.transition="transform .2s"}function s(e){n(r.STARS_CHECKED);var t=e.dataset;I(t.rating),e.classList.add(r.STARS_CHECKED),RottenTomatoes.formUI.starsRating.rating=t.rating}function I(o){document.querySelectorAll(T.STAR_MESSAGE).forEach(function(e){e.classList.remove(r.MESSAGE_FOCUSED),e.classList.remove(r.MESSAGE_UNFOCUSED);var t=e.dataset.starUpperThreshold>=o&&e.dataset.starLowerThreshold<=o?r.MESSAGE_FOCUSED:r.MESSAGE_UNFOCUSED;e.classList.add(t)})}function n(t){document.querySelectorAll(T.STAR).forEach(function(e){e.classList.remove(t)})}function m(e){document.getElementById(T.STARS_RATING_MODULE).classList.add(e)}function a(e){document.getElementById(T.STARS_RATING_MODULE).classList.remove(e)}RottenTomatoes.formUI=Object.assign(RottenTomatoes.formUI||{},{starsRating:{rating:"0",init:function(e){var t=document.querySelector(T.STARS_GROUP),o=t.querySelectorAll(T.STAR),i=window.matchMedia("only screen and (max-width: 760px)").matches;if(e+="",t.dataset.originalRating=e||"0",I(t.dataset.originalRating),o.forEach(function(e){i?(e.addEventListener("touchstart",l),e.addEventListener("touchend",u),e.addEventListener("touchmove",_)):(e.addEventListener("mouseover",d),t.addEventListener("mouseleave",E)),e.addEventListener("click",l),e.addEventListener("keydown",R)}),"0"!==e){var n=document.querySelector(T.STAR+'[data-rating="'+e+'"]');n&&n.click()}var a=$(T.STAR_TOOLTIP),r=RottenTomatoes.cookie.getCookie(c.NUMBER_OF_REVIEW_STARTS),s=parseInt(r);RottenTomatoes.cookie.getCookie(c.HIDE_STAR_TOOLTIP)&&a.addClass("hide"),r?(4<s&&a.addClass("hide"),RottenTomatoes.cookie.setCookie(c.NUMBER_OF_REVIEW_STARTS,s+1,RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY)):RottenTomatoes.cookie.setCookie(c.NUMBER_OF_REVIEW_STARTS,"1",RottenTomatoes.cookie.DEFAULT_COOKIE_EXPIRY)}}})}(),function(){var e=".js-stars-rating-static-container",t="stars-rating__container--is-not-rated",n="icon-star--checked",o=$(".js-star-rating-static"),a=$(e);RottenTomatoes.starsRatingStatic=Object.assign(RottenTomatoes.starsRatingStatic||{},{renderRating:function(i){i&&a.removeClass(t),o.removeClass(n),o.each(function(e,t){var o=$(t);o.data("rating")!==i||o.addClass(n)})},removeRating:function(){o.removeClass(n),a.addClass(t)}})}(),function(){var t,o,i=20,n={COMMENT_BOX:".js-textarea-with-counter-text",COUNTER_ITEM:".js-textarea-with-counter-item",CIRCLE_OVERLAY:".js-textarea-with-counter-circle-overlay"},e={CIRCLE_OVERLAY_ACTIVE:"textarea-with-counter__circle-overlay--active"},a=$(n.COMMENT_BOX);function r(){var e=$(this).val().trim();o.css({"stroke-dashoffset":100-2*e.length}),0===e.length||e.length>=i?(t.fadeOut(),RottenTomatoes.formUI.minimumCharacterCounter.minCountCheckPassed=!0):(t.fadeIn(),RottenTomatoes.formUI.minimumCharacterCounter.minCountCheckPassed=!1),RottenTomatoes.formUI.minimumCharacterCounter.textValue=e}function s(){t=$(n.COUNTER_ITEM),o=$(n.CIRCLE_OVERLAY),a.on("input change",r),a.on("focus blur",function(){o.toggleClass(e.CIRCLE_OVERLAY_ACTIVE)}),window.event.preventDefault()}function T(e){var t=e||"";a.blur().html(t).val(t),RottenTomatoes.formUI.minimumCharacterCounter.textValue=t}function c(){a.trigger("change")}RottenTomatoes.formUI=Object.assign(RottenTomatoes.formUI||{},{minimumCharacterCounter:{init:function(e){(a=$(n.COMMENT_BOX)).each(function(){var e=$(this);e.before(function(e){return'<div class="textarea-with-counter"><svg height="20" width="20" class="js-textarea-with-counter-item textarea-with-counter__item textarea-with-counter__item--svg"><circle cx="8" cy="8" r="6" class="textarea-with-counter__circle textarea-with-counter__circle--base" /><circle cx="8" cy="8" r="6" class="js-textarea-with-counter-circle-overlay textarea-with-counter__circle textarea-with-counter__circle-overlay" /></svg><span class="js-textarea-with-counter-item textarea-with-counter__minimum-character-text textarea-with-counter__item">minimum characters</span>'+e.outerHTML+"</div>"}(this)),e.remove(),a=$(n.COMMENT_BOX),s()}),s(),T(e),c()},textValue:null,updateCounter:c,setTextValue:T,minCountCheckPassed:!0}})}(),function(){var e=".js-error-toaster",t=".js-error-toaster-header",o=".js-error-toaster-message",i=".js-error-toaster-close-button",n={HIDE_ERROR_MESSAGE:"error-toaster--hidden"},a=document.querySelector(e),r=document.querySelector(t),s=document.querySelector(o),T=document.querySelector(i),c=4500;function l(){a.classList.add(n.HIDE_ERROR_MESSAGE),r.innerHTML="",s.innerHTML=""}T.addEventListener("click",l),RottenTomatoes.errorToaster={show:function(e,t){r.innerHTML=e,s.innerHTML=t,a.classList.remove(n.HIDE_ERROR_MESSAGE),setTimeout(l,c)},hide:l}}(),$(".js-affiliate-link").on("click",function(e){var t=$(e.currentTarget).data("affiliate");!function(e){window.dataLayer.push({event:"where to watch click",partner:e})}(t),function(e){if("Krux"in window){var t;switch(e){case"flixster":t="Jeq4X1vM";break;case"vudu":t="Jeq4QIYQ";break;case"target":t="Jeq4h9Us";break;case"amazon":t="Jeq4Nhvx";break;case"itunes":t="Jeq3zLy7";break;case"netflix":t="Jeq4B6OX"}Krux("admEvent",t,{})}}(t)}),function(){var T={RED_CIRCLE:".js-red-circle",SCORE_IN_CIRCLE:".js-inner-circle-score",ICON:".js-circle-icon"},o={ROTTEN:"score-details-circle__inner-circle--rotten"},r=12,i=59,c="icon__certified_fresh icon__fresh icon__rotten icon__NA icon__audience-empty";function l(e,t){return isNaN(e)&&(e=100),e<0&&(e=0),100<e&&(e=100),(100-e)/100*(2*Math.PI*t)}function R(e){return e.find(T.RED_CIRCLE)}function d(e,t){!function(e){return e<=i}(t)?e.removeClass(o.ROTTEN):e.addClass(o.ROTTEN)}function E(e,t,o){for(var i=0,n=Math.abs(e-t),a=t<e?-1:1;i<n;)(function(e){setTimeout(function(){o.find(T.SCORE_IN_CIRCLE).html(e)},i*r)})(e+=a),i++}RottenTomatoes.ScoreCircle={init:function(e){var t=R(e),o=t.attr("r"),i=e.data("score")||0,n=e.data("state");E(0,i,e),e.data("score")&&e.find(T.ICON).removeClass(c).addClass("icon__"+n),t.css({strokeDashoffset:l(i,o)}),d(t,i)},update:function(e,t,o,i){var n=R(e),a=n.attr("r"),r=parseInt($(T.SCORE_IN_CIRCLE).html()),s=e.find(T.ICON);E(r,t,e),n.css({strokeDashoffset:l(t,a)}),d(n,t),i!==o&&(s.fadeOut(),setTimeout(function(){s.removeClass(c),s.addClass("icon__"+i),s.fadeIn()},500))}}}(),function(){var T,c=".js-tomatometer-score-info",l=".js-audience-score-info";RottenTomatoes.scoreDetailBreakdown={render:function(e,t){T=function(e,t){if(e){var o="tomatometer"===t?"/10":"";return{average_rating:e&&e.avgScore&&e.avgScore+o||"- -",reviews_count:e&&e.numberOfReviews||"",fresh_count:e&&e.freshCount||0,rotten_count:e&&e.rottenCount||0,fresh_percentage:e&&e.freshCount/e.numberOfReviews*100||0,rotten_percentage:e&&e.rottenCount/e.numberOfReviews*100||0,audience_fresh_count:e&&e.likedCount||0,audience_rotten_count:e&&e.notLikedCount||0,audience_fresh_percentage:e&&e.likedCount/e.numberOfReviews*100||0,audience_rotten_percentage:e&&e.notLikedCount/e.numberOfReviews*100||0}}}(e,t);var o,i=Object.keys(T);o="tomatometer"===t?c:l;for(var n=0;n<i.length;n++){var a=i[n],r=T[a],s=$(o+"[data-"+a+"]");0<s.length&&(s[0].className.includes("score-bar")?s.css({width:r+"%"}):s.html(r&&r.toLocaleString()))}}}}();